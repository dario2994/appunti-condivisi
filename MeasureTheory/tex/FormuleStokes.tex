\section{Formule di Stokes}\label{sezione:FormuleStokes}

Durante tutta la sezione assumeremo sempre che $\Omega\subseteq\R^n$ sia un aperto.

\begin{theorem}\label{thm:PtRegEquiv}
	Per un punto $x\in \partial \Omega$ le seguenti $3$ condizioni sono equivalenti:
	\begin{enumerate}
		\item esistono $U$ intorno di $x$ e $f\in C^1(U,\R)$ tale che si abbia
			\begin{itemize}
				\item $U\cap \partial \Omega=f^{-1}(0)$,
				\item $U\cap \Omega=f^{-1}(\oo{-\infty}{0})$,
			\end{itemize}
			e tale che $\Diff f(x)\neq 0$ se $f(x)=0$;\label{PRE:i}
		\item esistono $U$ intorno di $x$ e $g$ diffeomorfismo $C^1$ da $\R^n$ in $U$ tale che\label{PRE:ii}
			\begin{itemize}
				\item $U\cap \partial \Omega = g(\R^{n-1}\times\{0\})$,
				\item $U\cap \Omega = g(\R^{n-1}\times\oo{-\infty}{0})$;
			\end{itemize}
		\item esistono, a meno di riordinare le coordinate, un intorno $U=V\times I$ di $x=(y,t)$ tale che $V\in\R^{n-1}$ è intorno di $y$
			e $I\in\R$ è intorno di $t$ e una funzione $\psi\in C^1(V,I)$ tale che
			\begin{itemize}
				\item $U\cap \partial \Omega = \{(z,s):s=\psi(z)\}$,
				\item $U\cap \Omega = \{(z,s):s<\psi(z)\}$.
			\end{itemize}\label{PRE:iii}
	\end{enumerate}
\end{theorem}

\begin{proof}
	Dimostriamo la catena in ordine inverso:
	\begin{description}
		\item [\ImplicationProof{PRE:i}{PRE:iii}] Dato che $\Diff f(x)\neq 0$, esiste una derivata parziale non nulla, supponiamo senza perdita
			di generalità che sia l'ultima e che sia positiva (se negativa il ragionamento è lo stesso).
			Allora le ipotesi del teorema della funzione implicita del Dini sono verificate, per cui otteniamo
			che esiste un intorno $V\times I\subseteq U$ di $x$ per cui esiste $\psi\in C^1(V,I)$ tale che $f(v,\psi(v))=0$ e $\psi(v)$
			è l'unico punto $t'\in I$ tale che $f(v,t')=0$.
			Inoltre, per la continuità di $\Diff f(x)$, esiste un intorno $V'\subseteq V$ di $v$ tale che $\Diff f(v')_n>\frac{1}{2}
			\Diff f(x)_n$ per tutti i $v'\in V'$. Ora, per la differenziabilità di $f$ in $v'$ si ha che
			\[
				f(v',\psi(v')+\delta)=f(v', \psi(v'))+\Diff f(v')_n\delta+\smallO(\delta)=\Diff f(v')\delta+\smallO(\delta)\virgola
			\]
			che, per $\delta>0$ e abbastanza piccolo, dà $f(v',\psi(v')+\delta)\geq \frac{1}{2}\Diff f(v')_n\geq \frac{1}{4}\Diff
			f(x)_n\delta>0$. Infine, non può esistere un $\delta>0$ tale che $\psi(v')+\delta\in I$ e
			$f(v',\psi(v')+\delta)<0$, altrimenti per la continuità di $f$ si avrebbe che esiste un punto $\psi(v')+\delta'\neq \psi(v')$
			che sia zero per la funzione $f(v',\cdot)$, contraddicendo il teorema della funzione implicita del Dini.
			Per $\delta<0$ si ha lo stesso risultato. Questo ci dice che $f^{-1}(0)\cap (V'\times I)=\{(v',s):s=\psi(v')\}$ e
			$f^{-1}(\oo{-\infty}{0})\cap (V'\times I)=\{(v',s):s<\psi(v')\}$, che conclude per le ipotesi sulle controimmagini di $f$.
		\item [\ImplicationProof{PRE:iii}{PRE:ii}] Se abbiamo $V\times I$ intorno di $x$ e $\psi$, detto $J=\oo{-\varepsilon}{\varepsilon}$
			possiamo ottenere un diffeomorfismo $g:V\times I \rightarrow V\times J$ ponendo $g(z,s)=(z,s-\psi(z))$. Allora,
			$g(V\times \{0\})=$graf$(\psi)=U\cap \partial \Omega$ e $g(V\times \oo{-\varepsilon}{0})=\{(z,s):s<\psi(z)\}=U\cap \Omega$.
			Per ottenere un diffeomorfismo di tutto $\R^n$ basta comporre $g$ con opportuni diffeomorfismi tra un intorno rettangolare
			di $x$ e $\R^n$.
		\item [\ImplicationProof{PRE:ii}{PRE:i}] Per la prima condizione basta considerare$f=(g^{-1})_n$ l'ultima componente di $g^{-1}$.
	\end{description}
\end{proof}


\begin{definition}[punto regolare]
	Diremo che un punto $x\in \partial \Omega$ è un punto regolare del bordo se verifica una delle $3$ condizioni di cui
	al \cref{thm:PtRegEquiv}.
\end{definition}

D'ora in poi assumeremo che $\Omega$ sia anche limitato.

\begin{definition}[aperto regolare]
	Diremo che $\Omega$ è un aperto regolare se tutti i punti del suo bordo sono regolari.
\end{definition}


\begin{theorem}[Partizione dell'unità]\label{thm:PartizioneUnita}
	Dato un ricoprimento di $\R^n$ con aperti $(\Omega_i)_{i\in I}$, esiste una famiglia di funzioni $f_i:\R^n\to\Rpiu$ infinitamente derivabili
	e non negative tali che:
	\begin{itemize}
		\item la chiusura dell'insieme in cui $f_i$ non si annulla è contenuta in $\Omega_i$ per ogni $i\in I$,
		\item per ogni $x\in\R^n$ vale che $\sum_{i\in I} f_i(x)=1$\footnote{La serie la definiamo come il $\sup$ delle somme finite.}.
	\end{itemize}
\end{theorem}
\begin{proof}
	TODO
\end{proof}

\begin{lemma}\label{lem:EquivRegolare}
	$\Omega$ è un aperto regolare se e solo se esiste una funzione $\phi\in C^1(\R^n,\R)$ tale che $\Diff \phi(x)\neq 0$ se $\phi(x)=0$ e tale che
	\begin{itemize}
		\item $\Omega = \phi^{-1}(\oo{-\infty}{0})$,
		\item $\partial \Omega = \phi^{-1}(0)$.
	\end{itemize}
\end{lemma}

\begin{proof}
	L'implicazione del ``se'' è banale per la caraterizzazione del punto \cref{PRE:i}. Per l'altra implicazione, per la regolarità dei punti
	del bordo di $\Omega$, consideriamo per ogni $x\in\partial \Omega$ un intorno $U_x$ tale che esista una funzione $\psi_x:U_x\rightarrow \R$
	come nel \cref{thm:PtRegEquiv}. Dato che $\Omega$ è limitato, $\partial\Omega$ è compatto e gli $U_x$ sono un ricoprimento aperto;
	quindi consideriamo un sottoricoprimento finito $U_1, \dots, U_n$  e prendiamo anche $U_0 = \R^n \setminus \partial \Omega$.
	Ora abbiamo che gli aperti $U_0,\dots,U_n$ sono un ricoprimento di $\R^n$;
	il \cref{thm:PartizioneUnita} fornisce quindi delle funzioni $f_i$ per ogni $i\in\{0,\dots, n\}$.
	Infine, definiamo $\psi_0:U_0\rightarrow \R$ tale che $\psi_0(x)=1$ se $x\notin \Omega$, $\psi_0(x)=-1$ altrimenti. Sia ora 
	\[
		\phi(x)=\sum_{i=0}^n f_i(x) \psi_i(x)\virgola
	\]
	dove, con una leggera imprecisione formale, poniamo $f_i(x) \psi_i(x) = 0$ se $x\notin U_i$, in modo che $f_i(x) \psi_i(x)$ sia una funzione
	$C^1$ in tutto $\R^n$. Infatti, in $U_i$, $\psi_i$ è $C^1$ e $f_i$ è addirittura $C^{\infty}$, altrove l'abbiamo posta uguale a zero.
	Ora abbiamo che $\phi\in C^1$ perché somma di funzioni $C^1$; $\phi(x)=0$ per ogni $x\in \partial\Omega$, dato che ognuna delle
	$\psi_i$ aveva questa proprietà se era definita in $x$ e la $\phi$ è una combinazione convessa di $\psi_i$;
	$\phi(x)<0$ per ogni $x \in \Omega$, perché $\phi$ è combinazione convessa di funzioni che, per ciascun $x\in\Omega$, sono non positive e
	almeno di una strettamente negativa; similmente, $\phi(x)>0$ per ogni $x \notin \bar{\Omega}$.
	
	Rimane da mostrare che $\Diff f(x)\neq 0$ se $f(x)=0$. Ma in ciascun punto $x$ del bordo, le funzioni $\psi_i$ non hanno differenziale nullo
	quando sono definite in $x$. Esisterà quindi una direzione $e_k$ per la quale esiste almeno un $i$ tale che $\Diff \psi_i(x)_k\neq 0$. Dato che
	le $\psi_i$ sono differenziabili, si ha che
	\[
		\psi_i(x+\delta e_k)=\psi_i(x)+\Diff \psi_i(x)_k \delta + \smallO(\delta) = \Diff \psi_i(x)_k \delta + \smallO(\delta)
	\]
	per cui, dato che $\psi_i(x+\delta e_k)<0$ solo se $x+\delta e_k\in \Omega$, quindi, per $u\neq i'$, $\Diff \psi_i(x)_k$ e
	$\Diff \psi_{i'}(x)_k$ non possono essere discordi, altrimenti si ha $\psi_i(x+\delta e_k)= \Diff \psi_i(x)_k \delta + \smallO(\delta)>0$ e
	$\psi_i'(x+\delta e_k)=\Diff \psi_i'(x)_k \delta + \smallO(\delta)<0$ pur avendo in entrambi i casi
	che $x+\delta e_k$ sta in $\Omega$. Quindi, sempre per lo stesso $x\in\partial \Omega$,
	\[ 
		\Diff \phi(x)=\sum_{i=0}^n \Diff (f_i \cdot\psi_i)(x)=\sum_{i=0}^n \Diff f_i(x)\cdot \psi_i(x)+\sum_{i=0}^n f_i(x)\cdot \Diff \psi_i(x)=
		\sum_{i=0}^n f_i(x)\cdot \Diff  \psi_i(x)\virgola
	\]
	poiché $\psi_i\equiv 0$ sul bordo; quindi $\Diff \phi(x)$ non è nullo perché la $j$-esima componente è combinazione convessa di
	$\Diff \psi_i(x)_k$ che sono non discordi.
\end{proof}

\begin{definition}
	Chiamiamo campo normale esterno la funzione $\nu:\partial\Omega\rightarrow \R^n$ tale che
	\[
		\nu(x)=\frac{\nabla \phi(x)}{\lVert\nabla \phi(x)\rVert}\punto
	\]
\end{definition}

\begin{remark}
	Il \cref{lem:EquivRegolare}, oltre che a fornire la funzione $\phi$ per l'aperto regolare $\Omega$, dice anche che $\nu(x)$ è ben definita
	su tutto $\partial \Omega$ e che è continua.
\end{remark}

\begin{remark}
	Si ha che per $t>0$ e $x\in\partial\Omega$, $x+t\nu(x)\notin \Omega$ per $t$ abbastanza piccoli e per $t<0$, $x+t\nu(x)\in \Omega$ per $t$
	abbastanza piccoli.
\end{remark}
\begin{proof}
	Stesso ragionamento fatto nella dimostrazione del \cref{lem:EquivRegolare}.
\end{proof}

\begin{remark}
	Per ogni $v$ tangente a $\partial\Omega$ in $x$ si ha che $<v,\nu(x)>=0$. Ma qui bisognerebbe spendere un paio di parole su cosa significhi
	essere tangente a $\partial\Omega$.
\end{remark}


Vogliamo ora formalizzare la definizione di integrale sulla superficie $\partial\Omega$ sfruttando anche i risultati della sezione precedente.

\begin{lemma}\label{lem:GrapVar}
	Sia $V\in\R^{n-1}$ aperto e $f\in C^1(V,\R)$, allora il grafico di $f$ è una varietà differenziabile di dimensione $n-1$ immersa in $\R^n$.
\end{lemma}
\begin{proof}
	Sia $g:V\rightarrow \R^n$ data da $g(x)=(x,f(x))$. Ora è chiaro che graf$(f)$ è l'immagine di $g$; inoltre $g$ è banalmente di classe $C^1$
	e, se vista come funzione da $V$ in graf$(f)$ è anche un omeomorfismo. Inoltre $\Diff g(x)[h]=(h,\Diff f(x)[h])$, in particolare il differenziale è
	iniettivo in ogni punto, quindi $g$ è una immersione iniettiva, cioè è una parametrizzazione $C^1$ di graf$(f)$.
\end{proof}

\begin{remark}
	Dalla dimostrazione di questo lemma, dato che $\nabla f(x)=\Diff f(x)$, segue immediatamente che $\Diff g(x)^T \Diff g(x)=
	(I \ \ \nabla f(x)^T)
	\left(\begin{smallmatrix}
	I \\
	\nabla f(x)
	\end{smallmatrix}\right)$, quindi per il \cref{lemma:DeterminanteMatriceQuasiIdentita} vale che $\det (\Diff g(x)^T \Diff g(x)) = 1+\lVert\nabla f(x)\rVert^2$. 
\end{remark}

Il \cref{lem:GrapVar} ci permette quindi di costruire un misura superficiale su graf$(f)$ in accordo con la \cref{def:MisuraKDimensionale}:
\begin{equation}\label{eq:MisuraSuperficialeGrafico}
	\sigma(E)=\int_{g^{-1}(E)} \sqrt{1+\lVert\nabla f(x)\rVert^2} \de x\punto
\end{equation}


\begin{proposition}\label{prop:FormulaStokes}
	Sia $u\in C^1(\bar \Omega)$ (ossia $u$ è la restrizione a $\bar \Omega$ di una funzione $C^1$ definita su un aperto
	$\Omega'\supseteq \bar \Omega$), sia $\nu:\partial \Omega \rightarrow \R^n$ la normale uscente da $\Omega$, allora vale che
	\begin{equation}\label{eq:FormulaStokes}
		\int_{\Omega} \Diff u(x)_j \de x = \int_{\partial \Omega} u(y)\nu(y)_j \de \sigma(y)\punto
	\end{equation}
\end{proposition}

\begin{proof}
	Per la dimostrazione si procederà in 2 step:
	\begin{enumerate}
		\item per ogni $p\in \bar \Omega$ esiste un intorno aperto rettangolare $U_p=\prod_{i=1}^n \oo{p_i-\varepsilon_i}{p_i+\varepsilon_i}$
			tale che l'\cref{eq:FormulaStokes} vale per ogni funzione $u$ tale che $supp(u)\subseteq U_p$;
		\item $\bar \Omega$ è ricoperto con un numero finito di intorni come sopra, quindi si applica il \cref{thm:PartizioneUnita} per ottenere
			la tesi per ogni $u$.
	\end{enumerate}
	
	Dimostriamo quindi il primo punto, distinguendo i casi in cui $p\in \Omega$ e $p\in \partial \Omega$.
	Se $p\in \Omega$ esisterà un intorno rettangolare $U_p=V\times \oo{a}{b}$ contenuto in $\Omega$, poiché quest'ultimo è un aperto. Se ora $supp(u)\subseteq U_p$,
	$u(\partial \Omega)=0$; quindi abbiamo che l'integrale a destra è $0$. Per l'intregrale a sinistra, invece, abbiamo che una funzione $u$
	con supporto contenuto in $V\times \oo{a}{b}$ è tale che $u(x)=0$ per ogni
	$x\in \partial (V\times \oo{a}{b})$. Allora, per il \cref{thm:Fubini} e il teorema fondamentale del calcolo integrale,
	\begin{align*}
		\int_{\Omega} \Diff u(x)_n \de x &= \int_{V\times \cc{a}{b}} \Diff u(v,t)_n \de (v,t) = \\
		& = \int_V \int_{\cc{a}{b}} \Diff u(v,t)_n \de t \de v = \int_V (u(v,b) - u(v,a)) \de v = 0\punto
	\end{align*}
	Quindi abbiamo la tesi del primo punto quando $p\in\Omega$. Se invece $p\in \partial \Omega$, allora $p$ è un punto regolare, cioè esiste
	un intorno $U=V\times I$ di $p$ e una $\phi\in C^1(V,I)$ tale che
	\begin{itemize}
		\item $U\cap \partial \Omega = \{(z,s):s=\psi(z)\}$,
		\item $U\cap \Omega = \{(z,s):s<\psi(z)\}$.
	\end{itemize}
	Distinguiamo ora i casi $j=n$ e $j\neq n$.
	\begin{description}
		\item [$j=n$:] Dato che stiamo supponendo che $supp(u)\subseteq U$, per il \cref{thm:Fubini} abbiamo che
			\begin{align*}
				\int_{\Omega} \Diff u(x)_n \de x  &= \int_{\Omega\cap U} \Diff u(v,t)_n\de x =
				\int_{U} \Diff u(v,t)_n \chi_{\{t<\psi(v)\}} \de (v,t) = \\
				& = \int_V \int_I \Diff u(v,t)_n \chi_{\{t<\psi(v)\}} \de t \de v =
				\int_V \int_{-\infty}^{\psi(v)} \Diff u(v,t)_n \de t \de v = \\
				& = \int_V (u(v,\psi(v)) - 0) \de v = \int_V u(v,\psi(v)) \de v\punto
			\end{align*}
			Ora abbiamo che la funzione $g:V\rightarrow \R^n$ data da $g(v)=(v,\psi(v))$ parametrizza l'ipersuperfice data dal grafico di
			$\psi$, quindi la misura superficiale è data dall' \cref{eq:MisuraSuperficialeGrafico}.
			Inoltre, detta $\nu:\partial \Omega \cap U \rightarrow \R^n$ la normale uscente da $\Omega$, sappiamo che
			$\nu(v,\psi(v))_n=(1+\psi(v)^2)^{-\frac{1}{2}}$. Quindi per definizione di integrale superficiale abbiamo che
			\begin{align*}
				\int_V u(v,\psi(v)) \de v &= \int_V u(v,\psi(v)) (1+\psi(v)^2)^{-\frac{1}{2}} (1+\psi(v)^2)^{\frac{1}{2}} \de v = \\
				& = \int_V u(v,\psi(v)) \nu(v,\psi(v))_n (1+\psi(v)^2)^{\frac{1}{2}} \de v = \\
				& = \int_{\partial \Omega \cap U} u(x) \nu(x)_n \de \sigma(x) = \\
				& = \int_{\partial \Omega} u(x) \nu(x)_n \de \sigma(x)\virgola
			\end{align*}
			dove nell'ultimo passaggio si è usato che $supp(u)\subseteq U$.
		\item [$j\neq n$:] Possiamo assumere (a meno di riordinare le coordinate) che $j=n-1$ e, a meno di considerare un intorno più piccolo,
			che $V=W \times J$. Ora, per il \cref{thm:Fubini} abbiamo che
			\[
				\int_{\Omega} \Diff_{n-1} u(x)_{n-1} \de x = \int_W \int_J \int_I \Diff_s u(w,s,t) \de t \de s \de w\virgola
			\]
			inoltre, dato che $\Diff_s \int_X u(v,s)\de v = \int_X \Diff_s u(v,s)\de v$ e che $\Diff_y \int_a^y u(v,t)\de t=u(v,y)$,
			utilizzando le regole di composizione del differenziale, abbiamo che
			\[
				\Diff_s \int_{-\infty}^{\psi(w,s)} u(w,s,t) \de t =
				\int_{-\infty}^{\psi(w,s)} \Diff_s u(w,s,t) \de t + u(w,s,\psi(w,s))\Diff_s \psi (w,s)\punto
			\]
			Per cui, integrando il termine a sinistra su $V=W\times J=W\times \oo{a}{b}$, per il teorema fondamentale del
			calcolo integrale,
			\begin{align*}
				&\int_W \int_a^b \Diff_s \int_{-\infty}^{\psi(w,s)} u(w,s,t) \de t \de s \de w = \\
				&\int_W \left(\int_{-\infty}^{\psi(w,b)} u(w,b,t) \de t - \int_{-\infty}^{\psi(w,a)} u(w,a,t) \de t\right) \de w
				= 0\virgola
			\end{align*}
			poiché i punti $(w,b,t)$ e $(w,a,t)$ sono sul bordo di $U$, dove la funzione $u$ è nulla per ipotesi. Usando questa relazione
			otteniamo che
			\[
				\int_W\int_J\int_I\Diff_s u(w,s,t) \de t \de s \de w =-\int_W \int_J u(w,s,\psi(w,s))\Diff_s \psi (w,s)\de s\de w\punto
			\]
			Ora, dato che $\nu(x)_{n-1}=\nu(v,\psi(v))_{n-1}=-\Diff\psi(v)_{n-1}(1+\psi(v)^2)^{-\frac{1}{2}}$, otteniamo
			\begin{align*}
				\int_{\Omega} \Diff_{n-1} u(x)_{n-1} \de x & = -\int_W \int_J u(w,s,\psi(w,s))\Diff_s \psi (w,s) \de s \de w\\
				& = -\int_V u(v,\psi(v))\Diff_{n-1} \psi(v) \de v\\
				& = -\int_V u(v,\psi(v))(-\nu(v,\psi(v))_{n-1})(1+\psi(v)^2)^{\frac{1}{2}} \de v\\
				& = \int_{\partial \Omega \cap U} u(x)\nu(x)_{n-1} \de \sigma(x)\punto
			\end{align*}
	\end{description}
	Questo conclude il primo punto.
	
	Per la seconda parte procediamo in questo modo. Intanto, osserviamo che se $f\in C^1(\R^n)$ ha supporto $U$ tale che $U\cap \bar\Omega =
	\emptyset$, la \cref{eq:FormulaStokes} è banalmente vera in quanto entrabi i membri sono banalmente nulli.
	Consideriamo ora, per ogni punto $p\in \bar\Omega$, un intorno $U_p$ della forma richiesta al punto precedente. È chiaro che $\{U_p\}$ è un
	ricoprimento aperto del compatto $\bar \Omega$, quindi consideriamo un sottoricoprimento finito $U_1,\dots,U_n$; consideriamo anche
	$U_0=\R^n \setminus \bar\Omega$. Il \cref{thm:PartizioneUnita} ci fornisce delle funzioni $f_i\in C^{\infty}$, per $0\leq i \leq n$,
	tali che la loro somma è la funzione costante $1$.
	Sia ora $u\in C^1(\R^n,\R)$ una qualsiasi funzione. Otteniamo che
	\[
		u = \sum_{i=0}^n f_i\cdot u\virgola
	\]
	ma ora abbiamo che $f_i \cdot u$ (che è una funzione $C^1$) soddisfa l'\cref{eq:FormulaStokes} per ogni $i$; infatti, per $i=0$ è vero
	per quanto appena osservato, per $i>0$, la funzione $f_i \cdot u$ ha supporto contenuto in $U_p$ per qualche $p\in \bar\Omega$ e, per quanto
	dimostrato nel punto precedente, abbiamo che per questo intorno $U_p$ ogni funzione $C^1$ soddisfa l'\cref{eq:FormulaStokes}.
	Per linearità degli integrali e quindi dei membri che compaiono in questa equazione, è chiaro che le funzioni che soddisfano formano
	un sottospazio vettoriale di $C^1$. In particolare $u$ soddisfa la formula di Stokes.
\end{proof}

Un'immediata conseguenza del teorema appena dimostrato è la seguente:

\begin{corollary}(Teorema della divergenza)
	\label{cor:thDivergenza}
	Sia $u:\bar\Omega \rightarrow \R^n$ una funzione $C^1$ (nello stesso senso di prima), allora si ha che
	\begin{equation}\label{eq:thDivergenza}
		\int_{\Omega} \text{div }u (x) \de x = \int_{\partial \Omega} <u(y),\nu(y)> \de \sigma(y)\puntovirgola
	\end{equation}
	dove l'operatore di divergenza è definito da $\text{div }u(x==\text{tr }\Diff u(x)$.
\end{corollary}

\begin{proof}
	Utilizzando la \cref{prop:FormulaStokes} sulla componente $j$-esima di $u$ che indichiamo con $u^j$ si ha che, per ogni $0\leq j\leq n$,
	\[
		\int_{\Omega} \Diff u^j(x)_j \de x = \int_{\partial \Omega} u^j(y)\nu(y)_j \de \sigma(y)\virgola
	\]
	da cui sommando otteniamo, per linearità degli integrali:
	\[
		\int_{\Omega} \sum_{j=0}^n\Diff u^j(x)_j \de x = \int_{\partial \Omega} \sum_{j=0}^n u^j(y)\nu(y)_j \de \sigma(y)\punto
	\]
	Ma ora, $\text{div}u (x)= \text{tr}\Diff u(x) = \sum_{j=0}^n \Diff u^j(x)_j$ e $<u(x),\nu(x)>=\sum_{j=0}^n u^j(y)\nu(y)_j$,
	quindi si ha la tesi.
\end{proof}

Giocherellando ancora con queste equazioni si ottengono anche le seguenti formule dette di Green:

\begin{corollary}(Prima formula di Green)
	Siano $u\in C^1(\bar\Omega, \R)$ e $v\in C^2(\bar\Omega, \R)$, allora si ha
	\[
		\int_{\Omega} \left( u \Delta v+< \text{grad }u,\text{grad }v> \right) de x=
		\int_{\bar \Omega} u \frac{\partial v}{\partial \nu} \de \sigma(y) \virgola
	\]
	dove l'operatore $\Delta v = \sum_{j=1}^n \Diff_{jj} v$ è il laplaciano e $\frac{\partial v}{\partial \nu}(x)=\Diff v(x)[\nu]$.
\end{corollary}

\begin{proof}
	Applicando la \cref{prop:FormulaStokes} sulle funzioni $v(x)\Diff u(x)_j$, dato che abbiamo 
	$\Diff_j (v(x)\Diff u(x)_j ) = \Diff v(x)_j \Diff u(x)_j + v(x)\Diff_{jj} u(x)$, sommando su $j$ otteniamo la tesi.
\end{proof}

\begin{corollary}(Seconda formula di Green)
	Siano $u,v\in C^2(\bar\Omega, \R)$ allora si ha che
	\[
		\int_{\Omega}\left(u\Delta v-v\Delta u\right) \de x=
		\int_{\bar\Omega}u\frac{\partial v}{\partial\nu}-v\frac{\partial u}{\partial\nu} \de \sigma(y)\punto
	\]
\end{corollary}

\begin{proof}
	Immediata conseguenza della prima formula applicata a $u,v$ e a $v,u$; poi basta sottrarre membro a membro.
\end{proof}


