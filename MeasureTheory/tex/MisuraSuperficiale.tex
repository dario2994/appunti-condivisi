\section{Misura su varietà differenziabili}
Obiettivo di questa sezione è formalizzare i concetti di ``lunghezza'', ``superficie'', ``volume'', utilizzando gli strumenti di teoria della misura affrontati finora. 

\begin{definition}
	Una funzione $f:\Omega \subseteq \R^k\to\R^n$, con $\Omega$ aperto, si dice immersione iniettiva se è differenziabile con continuità ed è iniettiva con differenziale inettivo in ogni punto. In tal caso si dice che $f$ è una parametrizzazione $C^1$ della superficie $k$-dimensionale $f(\Omega)$.
\end{definition}

\begin{remark}\label{nota:TopologiaIndotta}
	Dato un sottoinsieme $Y$ di uno spazio topologico $X$, esiste una naturale topologia indotta su $Y$. In particolare un sottoinsieme $U$ di $Y$ è un aperto di $Y$ nella topologia indotta se e solo esiste un aperto $V$ di $X$ tale che $U=V\cap Y$. 
	
	Si verifica facilmente che questa topologia indotta è effettivamente una topologia su $Y$.
\end{remark}

D'ora in poi, quando lavoreremo su un sottoinsieme di $\R^n$, sottoinderemo di star considerando la topologia indotta su quel sottoinsieme, come definita nella \cref{nota:TopologiaIndotta}.

\begin{definition}
	Un sottoinsieme $\Sigma$ di $\R^n$ è una varietà differenziabile $k$-dimensionale di $\R^n$ se per ogni $x\in\Sigma$ esiste un intorno aperto (nella topologia indotta) di $x$ in $\Sigma$ che ammette una parametrizzazione $C^1$ definita su un aperto di $\R^k$.
\end{definition}

\begin{definition}\label{def:BorelianiVarieta}
	Ricalcando la \cref{def:Boreliani}, definiamo Boreliani di una varietà differenziabile $k$-dimensionale di $\R^n$ $\Sigma$ come la \sigalg\ generata dagli aperti di $\Sigma$ nella topologia indotta.
\end{definition}


\begin{proposition}\label{prop:SottovarietaUnioneNumerabile}
	Data $\Sigma$ varietà $C^1$ $k$-dimensionale di $\R^n$, esistono $\{\Sigma_i\}_{i\in\N}\subseteq\Sigma$, aperti nella topologia di $\Sigma$, tali che $\cup_{i\in\N}\Sigma_i=\Sigma$ e $\Sigma_i$ ammette una parametrizzazione $C^1$ definita su un aperto $\Omega_i$ di $\R^k$, per ogni $i\in\N$.
\end{proposition}
\begin{proof}
	La varietà $\Sigma$ è separabile in quanto sottoinsieme di $\R^n$ che è separabile, ma di conseguenza è anche Lindelöf, poichè in uno spazio metrico la separabilità e la proprietà di Lindelöf sono equivalenti.
	
	Per la definizione stessa di varietà $C^1$ $k$-dimensionale, per ogni punto $P\in\Sigma$ esiste un suo intorno aperto $\Sigma_P$ (nella topologia di $\Sigma$) che ammette parametrizzazione $C^1$. Abbiamo quindi che $\{\Sigma_P\}_{P\in\Sigma}$ è un ricoprimento aperto di $\Sigma$ e perciò per la proprietà di Lindelöf possiamo estrarne un ricoprimento numerabile, da cui la tesi.
\end{proof}

\begin{lemma}\label{lemma:ImmagineApertiContinua}
	Sia $f:\R^k\to\R^n$ una funzione continua, allora $f$ manda aperti di $\R^k$ in Boreliani di $\R^n$.
\end{lemma}
\begin{proof}
	Consideriamo $A$ aperto di $\R^k$ e definiamo $K_n=\{x\in A\ |\ d_{A^c}(x)\ge\frac 1n\ \wedge\ |x|\le n\}$, dove $d_{A^c}(x)$ indica la distanza del punto $x\in\R^k$ dal chiuso $A^c$. $K_n$ è facilmente chiuso e limitato, quindi è compatto, e inoltre vale che  $A=\bigcup_{n\in\N}K_n$.
	
	Abbiamo quindi che
	\begin{equation*}
		f(A)=f(\bigcup_{n\in\N}K_n)=\bigcup_{n\in\N}f(K_n)\punto
	\end{equation*}
	$f(K_n)$ è però compatto per ogni $n\in\N$, in quanto immagine continua di un compatto, e di conseguenza è anche un Boreliano di $\R^n$. Quindi $f(A)$ è anch'esso un Boreliano in quanto unione numerabile di Boreliani.	
\end{proof}

\begin{lemma}\label{lemma:ContinuaImplicaBoreliana}
	Sia $f:X\to Y$ una funzione continua, dove $(X,\A,\mu)$ e $(Y;\mathscr{B},\nu)$ sono spazi di misura, allora $f$ è Boreliana, cioè controimmagine di Boreliani è Boreliana. 
\end{lemma}
\begin{proof}
	La dimostrazione ricalca fondamentalmente quella della \cref{prop:CounterImgMis}, sfruttando che controimmagine di aperti tramite funzioni continue è aperta.
\end{proof}

\begin{remark}\label{nota:SigmaBoreliano}
	Utilizzando la stessa notazione del \cref{prop:SottovarietaUnioneNumerabile}, notiamo che per il \cref{lemma:ImmagineApertiContinua} $\Sigma_i$ è un Boreliano di $\R^n$, per ogni $i\in\N$, in quanto immagine di un aperto tramite la funzione continua $f_i$. Di conseguenza abbiamo anche che $\Sigma=\cup_{i\in\N}\Sigma_i$ è un Boreliano, poichè unione di Boreliani.  
\end{remark}

\begin{remark}\label{nota:BorelianiSottovarieta}
	Per la \cref{nota:SigmaBoreliano}, abbiamo che gli aperti di $\Sigma$ sono anche Boreliani di $\R^n$, poichè sono intersezione fra aperti di $\R^n$ e $\Sigma$, che è un Boreliano di $\R^n$. Perciò in particolare otteniamo che i Boreliani di $\Sigma$ sono un sottoinsieme dei Boreliani di $\R^n$.
\end{remark}

\begin{lemma}\label{lemma:InvarianzaImmersione}
	Date $f:\Omega\subseteq\R^k\to M$ e $g:\Omega'\subseteq\R^k\to M$ parametrizzazioni $C^1$ della superficie $k$-dimensionale $M$, per ogni $E$ Boreliano di $M$ sono definiti i seguenti integrali e vale che 
	\begin{equation*}
		\int_{g^{-1}(E)}\sqrt{\det(Dg(x)^TDg(x))}\de x=\int_{f^{-1}(E)}\sqrt{\det(Df(x)^TDf(x))}\de x
	\end{equation*}
\end{lemma}
\begin{proof}
	Innanzitutto notiamo che, dato $E$ Boreliano di $M$, i due integrali sono definiti, in quanto $Df(x)$ e $Dg(x)$ sono continue e $f^{-1}(E)$ e $g^{-1}(E)$ sono Boreliani di $\R^k$. Infatti per la \cref{nota:BorelianiSottovarieta} $E$ è un Boreliano di $\R^n$, quindi $f^{-1}(E)$ e $g^{-1}(E)$ sono controimmagini di un Boreliano tramite funzioni continue e di conseguenza sono Boreliani di $\R^k$ per il \cref{lemma:ContinuaImplicaBoreliana}.

	Sia $\varphi=g\circ f^{-1}$, allora $\varphi$ è un diffeomorfismo $C^1$ fra gli aperti $\Omega$ e $\Omega'$. Quindi per il \cref{thm:CambioVariabile} otteniamo
	\begin{multline*}
		\int_{f^{-1}(E)}\sqrt{\det(Df(x)^TDf(x))}\de x=\int_{\varphi\circ g^{-1}(E)}\sqrt{\det(Df(x)^TDf(x))}\de x=\\
		=\int_{g^{-1}(E)}\sqrt{\det(Df(\varphi(x))^TDf(\varphi(x)))}\ |\det D\varphi(x)|\de x=\int_{g^{-1}(E)}\sqrt{\det(Dg(x)^TDg(x))}\de x\virgola
	\end{multline*}
	dove abbiamo usato che se $g=f\circ \varphi$, allora $Dg(x)=Df(\varphi(x))\cdot D\varphi(x)$.
\end{proof}

\begin{definition}\label{def:MisuraKDimensionale}
	Sia $E$ Boreliano di $\Sigma$, varietà $C^1$ $k$-dimensionale di $\R^n$, e siano $\{\Sigma_i\}_{i\in\N}$ e $\{\Omega_i\}_{i\in\N}$ come nel \cref{prop:SottovarietaUnioneNumerabile}. Chiamiamo inoltre, per ogni $i\in\N$, $f_i:\Omega_i\to\Sigma_i$ l'immersione iniettiva che parametrizza $\Sigma_i$.
	
	Definiamo la misura di Lebesgue $k$-dimensionale di $E$ come
	\begin{equation*}
		\sigma(E)=\sum_{i\in\N} \sigma_i(E_i\cap \Sigma_i)\virgola
	\end{equation*}
	dove $E_i=E\setminus (\cup_{j<i}\Sigma_j)$ e $\sigma_i(F)=\int_{f_i^{-1}(F)}\sqrt{\det(Df_i(x)^TDf_i(x))} \de x$.
\end{definition}
\begin{theorem}
	La \cref{def:MisuraKDimensionale} è una buona definizione e non dipende dalla scelta del ricoprimento $\{\Sigma_i\}_{i\in\N}$ e delle immersioni iniettive $\{f_i\}_{i\in\N}$.
\end{theorem}
\begin{proof}
	Innanzitutto notiamo che la definizione è ben posta, in quanto tutti gli integrali sono ben definiti. Infatti $Df_i(x)$ è continua per ogni $i\in\N$ e inoltre si dimostra facilmente per induzione su $i$ che $E_i\cap\Sigma_i$ è un Boreliano di $\R^n$, utilizzando la \cref{nota:BorelianiSottovarieta}. Quindi $f_i^{-1}(E_i\cap\Sigma_i)$ è un Boreliano di $\R^k$ per il \cref{lemma:ContinuaImplicaBoreliana} (analogamente a quanto detto nel \cref{lemma:InvarianzaImmersione}).

	Consideriamo ora due diversi ricoprimenti $\{\Sigma_i\}_{i\in\N}$ e $\{\Sigma_i'\}_{i\in\N}$ di $\Sigma$, che rispettano le ipotesi del \cref{prop:SottovarietaUnioneNumerabile} e che ammettono rispettivamente parametrizzazioni $\{f_i\}_{i\in\N}$ e $\{g_i\}_{i\in\N}$. Vogliamo dimostrare che le misure $\sigma$ e $\sigma'$ indotte dai due ricoprimenti coincidono.
	
	Sia $B_{i,j}=(\Sigma_i\setminus (\cup_{k<i}\Sigma_k))\cap (\Sigma_j'\setminus (\cup_{k<j}\Sigma_j'))$, allora $\{B_{i,j}\}_{i,j\in\N}$ è una partizione di $\Sigma$ con elementi disgiunti (è facile verificare che $B_{i,j}\cap B_{i',j'}=\emptyset$ per ogni $i,j,i',j'\in\N$). In particolare, poichè
	\begin{equation*}
		E_i\cap\Sigma_i=(E\setminus (\cup_{j<i}\Sigma_j))\cap \Sigma_i=E\cap (\Sigma_i\setminus (\cup_{k<i}\Sigma_k))=E\cap (\cup_{j\in\N}B_{i,j})=\cup_{j\in\N}(E\cap B_{i,j})\virgola
	\end{equation*}
	abbiamo che
	\begin{equation*}
		\sigma_i(E_i\cap \Sigma_i)=\sigma_i(\cup_{j\in\N}(E\cap B_{i,j}))=\sum_{j\in\N}\sigma_i(E\cap B_{i,j})\virgola
	\end{equation*}
	dove l'ultima uguaglianza è vera perchè dati $A_j=E\cap B_{i,j}$, che sono disgiunti fra loro, risulta
	\begin{align*}
		\sigma_i(\cup_{j\in\N}A_j)& =\int_{f_i^{-1}(\cup_{j\in\N}A_j)}\sqrt{\det(Df_i(x)^TDf_i(x))} \de x\\
		&=\sum_{j\in\N}\int_{f_i^{-1}(A_j)}\sqrt{\det(Df_i(x)^TDf_i(x))} \de x=\sum_{j\in\N}\sigma_i(E\cap B_{i,j})\punto
	\end{align*}
	
	Otteniamo quindi che
	\begin{equation*}
		\sigma(E)=\sum_{i\in\N}\sigma_i(E_i\cap \Sigma_i)=\sum_{i,j\in\N} \sigma_i(E\cap B_{i,j})
	\end{equation*}
	e analogamente $\sigma'(E)=\sum_{i,j\in\N} \sigma_i'(E\cap B_{i,j})$.

	Per il \cref{lemma:InvarianzaImmersione} applicato alle parametrizzazioni $f_i$ e $g_j$ e al Boreliano $E\cap B_{i,j}$, abbiamo che $\sigma_i(E\cap B_{i,j})=\sigma_j'(E\cap B_{i,j})$, da cui otteniamo quindi che $\sigma(E)=\sigma'(E)$.
\end{proof}

Cerchiamo ora di capire il perchè di questa definizione, studiando alcuni casi particolari. Innanzitutto ci riduciamo al caso in cui la varietà $C^1$ $k$-dimensionale che consideriamo è parametrizzata da un'unica funzione $f:\Omega\subseteq \R^k\to\Sigma$. Possiamo infatti limitarci a studiare questa situazione in quanto in generale la misura superficiale è semplicemente ``un'incollamento'' delle misure su superfici $k$-dimensionali parametrizzate. 

In particolare prendiamo ora in considerazione il caso ancora più semplice in cui la varietà è uno spazio affine $k$-dimensionale di $\R^n$, che chiameremo $V$.

\begin{remark}\label{nota:IsometriaSottospazio}
	Dato $V$ sottospazio affine $k$-dimensionale di $\R^n$, allora esiste $U:\R^k\to V$ isometria lineare.
\end{remark}

Quello che ci aspettiamo da una misura su $V$ è che si comporti come la misura di Lebesgue su $\R^k$, cioè che dipenda dalla metrica del sottospazio $V$. Perciò vorremmo che data $U:\R^k\to V$ isometria lineare (che esiste per la \cref{nota:IsometriaSottospazio}), valga che $\sigma(E)=m_k(U^{-1}(E))$ per ogni $E\in\mathcal{B}(V)$. Ma questo risulta immediato in quanto
\begin{equation*}
	\sigma(E)=\int_{U^{-1}(E)}\sqrt{\det(DU(x)^TDU(x))}\de x=\int_{U^{-1}(E)}\sqrt{\det(U^TU)}\de x=m_k(U^{-1}(E))\virgola
\end{equation*}
dove abbiamo utilizzato che $DU(x)=U$, in quanto $U$ è lineare, e che $U$ è ortogonale e quindi $U^TU=I$.

\begin{example}
	Consideriamo il piano $x+y+z=1$ di $\R^3$ e in particolare il triangolo di tale piano formato dalla base canonica di $\R^3$. Tale triangolo è un triangolo equilatero di lato $\sqrt{2}$, vorremmo quindi che la sua misura (cioè la sua ``area'') sia quella di un triangolo equilatero in $\R^2$ con lo stesso lato. Questo però è ovvio per quanto appena detto, poichè la misura del triangolo equivale alla misura di un suo isometrico, che quindi è un triangolo con lo stesso lato.
\end{example}