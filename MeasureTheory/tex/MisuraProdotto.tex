\section{Misura prodotto}
Trattiamo ora la possibilità di rendere uno spazio di misura il prodotto di due spazi di misura. 

Questo risulterà facile sfruttando, come strumento principale, il teorema di estensione di Caratheodory. 
Nella dimostrazione del primo teorema, che fondamentalmente verifica le ipotesi di Caratheodory, proponiamo una via tecnica (che sfrutta la teoria degli integrali costruita), che diverge da quello che potrebbe essere un modo standard di procedere. Questo è sia più breve di una dimostrazione fatta con le mani, sia rende chiara da subito la possibilità di avere scambi tra gli operatori integrali in uno spazio prodotto. 

Infine dimostreremo i teoremi di Fubini e Tonelli, cioè la possibilità di scambiare tra loro gli operatori di integrazione sotto opportune ipotesi.
%TODO Parole in libertà qui sopra.


\newcommand{\B}{\ensuremath{\mathscr B}}
\begin{definition}
	Dati due insiemi $X,Y$ e $x\in X$ fissato, indichiamo con la notazione $J^X_x$ la funzione $J^X_x:\mathcal P(X\times Y) \to \mathcal P(Y)$ così definita:
	\begin{equation*}
		\forall E\subseteq X\times Y:\ J^X_x(E)=\{y\in Y:\ (x,y)\in E\}
	\end{equation*}
	
	Dove ovvio verrà omesso l'apice che indica l'insieme.
\end{definition}

\begin{definition}\label{def:SemianelloProdotto}
	Dati due spazi misurabili $(X,\A)$, $(Y,\B)$ definiamo, con abuso di notazione, $\A\times\B$ come la famiglia degli insiemi $A\times B$ dove $A\in\A$ e $B\in\B$.
\end{definition}

\begin{proposition}\label{prop:SemianelloProdotto}
	Dati due spazi misurabili $(X,\A)$, $(Y,\B)$, la famiglia $\A\times\B\subseteq \mathcal P(X\times Y)$ è un \semiring{}.
\end{proposition}
\begin{proof}
	Ovviamente $\emptyset\in\A\times\B$ visto che $\emptyset\in\A$ e $\emptyset\in\B$.
	
	Per concludere, dati $A\times B, A'\times B'\in\A\times\B$, mostriamo esplicitamente una scrittura dell'intersezione e della differenza che rispetti le proprietà che deve avere un \semiring{}:
	\begin{align*}
		(A\times B)\cap (A'\times B') &= (A\cap A')\times(B\cap B')\virgola \\
		(A\times B)\setminus (A'\times B') &= (A\setminus A')\times B)\sqcup( (A\cap A')\times (B\setminus B') )\punto
	\end{align*}
\end{proof}

\begin{definition}\label{def:PremisuraProdotto}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, denotiamo con $\mu\nu$ la funzione $\mu\nu:\A\times\B\to\Rpiu$ definita in modo che 
	\begin{equation*}
		\forall A\times B\in\A\times\B:\ \mu\nu(A\times B)=\mu(A)\nu(B)\punto
	\end{equation*}
\end{definition}

\begin{theorem}\label{thm:PremisuraProdotto}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, allora $(X\times Y,\A\times\B,\mu\nu)$ è uno spazio di misura elementare, dove $\A\times\B$ e $\mu\nu$ sono definiti nelle \cref{def:SemianelloProdotto,def:PremisuraProdotto}.
\end{theorem}
\begin{proof}
	Avendo già verificato che $\A\times\B$ è un \semiring{} nella \cref{prop:SemianelloProdotto}, è sufficiente mostrare che $\mu\nu$ è \sigadd{}.
	
	Sia $(A_n\times B_n)_{n\in\N}\subseteq \A\times \B$ una partizione disgiunta di $A\times B$.
	
	Per ogni $x\in X$, essendo gli $A_n\times B_n$ disgiunti, risulta
	\begin{equation}\label{eq:PremisuraProdottoSerie}
		\bigsqcup_{n\in\N} J_x(A_n\times B_n) = J_x(A\times B)  \implies \sum_{n\in\N}\nu\left(J_x(A_n\times B_n)\right)=\nu\left(J_x(A\times B)\right)\virgola
	\end{equation}
	dove nell'implicazione abbiamo applicato la \sigadd[ità] di $\nu$.
	
	Applicando la sola definizione della misura prodotto e dell'integrale per funzioni semplici, fissato $C\times D\subseteq \A\times\B$, abbiamo
	\begin{equation}\label{StupidaIdentitaIndicatrici}
		\mu\nu(C\times D)=\mu(C)\nu(D)=\int_{X}\chi_C(x)\nu(D)\de \mu(x)=\int_X \nu\left(J_x(C\times D)\right)\de\mu(x)\virgola
	\end{equation}
	dove l'ultima uguaglianza segue dalla facile identità $\nu\left(J_x(C\times D)\right)=\chi_C(x)\nu(D)$.
	
	Ora unendo le \cref{eq:PremisuraProdottoSerie,StupidaIdentitaIndicatrici}, sfruttando il \cref{cor:IntegrazionePerSeriePositive}, otteniamo
	\begin{align*}
		\mu\nu(A\times B)&=\int_X\nu(J_x(A\times B))\de \mu(x)=\int_X\sum_{n\in\N}\nu\left(J_x(A_n\times B_n)\right)\de\mu(x)\\
		&=\sum_{n\in\N}\int_X\nu\left(J_x(A_n\times B_n)\right)\de\mu(x)=\sum_{n\in\N}\mu\nu(A_n\times B_n)\virgola
	\end{align*}
	che è la tesi cercata.
\end{proof}

%TODO MIgliorare da qui in poi.

\begin{definition}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, chiamiamo $(X\times Y,\A\otimes\B,\mu\nu)$ lo spazio misurabile prodotto, la cui esistenza ci è assicurata dal \cref{EstensioneCaratheodory}, generato a partire dallo spazio di premisura definito nel \cref{thm:PremisuraProdotto}. Inoltre chiameremo $\A\otimes\B$ la \sigalg{} prodotto.
\end{definition}

È importante notare che la scelta dell'estensione della premisura alla misura prodotto è, in qualche senso, di carattere arbitrario. Infatti, a meno che gli spazi fossero \sigfin[i], erano possibili altre estensioni non coincidenti della misura. 
È preferibile però considerare l'estensione proposta dal teorema di Caratheodory poichè è la scelta corretta in vista dei teoremi cardine di questa sezione: teoremi di Fubini e Tonelli.

\begin{proposition}
	Siano $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura ed $E$ un insieme misurabile dello spazio prodotto $(X\times Y,\A\otimes\B,\mu\nu)$.
	Per $\mu$-quasi ogni $x$ l'insieme $J^X_x(E)$ è un misurabile, cioè appartiene a $\B$.
\end{proposition}
\begin{proof}
	TODO: Non sono troppo convinto dell'enunciato, forse serve qualche ipotesi di \sigfin[ezza].
\end{proof}

\begin{proposition}
	Siano $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura ed $f:X\times Y\to\Rbar$ una funzione misurabile dello spazio prodotto $(X\times Y,\A\otimes\B,\mu\nu)$.
	Per $\mu$-quasi ogni $x$ la funzione $f(x,{}\cdot{}):Y\to\Rbar$ è misurabile nello spazio $(Y,\B,\nu)$.
\end{proposition}
\begin{proof}
	TODO: Come sopra!
\end{proof}





\begin{theorem}[Tonelli]
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, sia $f:X\times Y\to \Rbar$ una funzione positiva misurabile sullo spazio prodotto $(X\times Y,\A\otimes\B,\mu\nu)$ a supporto \sigfin[o].

	Allora la funzione $f(x,{}\cdot{})$ è misurabile per $\mu$-quasi ogni $x\in X$, la funzione $\int_Y f(x,y)\de\nu(y)$ è perciò definita $\mu$-quasi ovunque e, ponendola nulla dove non è definita, risulta misurabile. Stessa cosa vale anche scambiando tra loro i ruoli di $X$ e $Y$.
	
	Infine vale la seguente identità, che acquista significato visto quanto si è appena affermato (la funzione integrale, dove non definita, la pongo arbitrariamente a $0$):
	\begin{equation*}
		\int_X\int_Y f(x,y)\de\nu(y)\de\mu(x)=\int_{X\times Y}f(x,y)\de\mu\nu(x,y)=\int_Y\int_Xf(x,y)\de\mu(x)\de\nu(y)
	\end{equation*}
\end{theorem}
\begin{proof}
	Definiamo $V$ l'insieme delle funzioni positive misurabili sullo spazio prodotto che rispettano le richieste di misurabilità dell'enunciato (solo quelle senza scambiare i ruoli di $X$ e $Y$, cioè quelle necessarie a dare senso alla prima identità) nonchè la prima identità tra gli integrali. Dimostreremo che $V$ comprende tutte le funzioni a supporto \sigfin[o], e questo proverà la tesi visto che per totale simmetria dovrà valere anche la seconda identità tra integrali. 
	
	Verifichiamo che $V$ rispetti tutte le ipotesi del MISREF:	
	\begin{description}
		\item[$V$ contiene le indicatrici dei rettangoli] Questo risulta molto facile sfruttando la definizione della misura prodotto e dell'integrale di funzioni semplici (in particolare le ipotesi di misurabilità, in questo caso, valgono ovunque e non solo $\mu$-quasi ovunque).
		
		Infatti, fissati $A\in\A$ e $B\in\B$, vale:
		\begin{align*}
			\int_X\int_Y \chi_{A\times B}(x,y) \de\nu(y)\de\mu(x) &=\int_X \nu(B)\chi_A(x)\de\mu(x)=\mu(A)\nu(B)=\mu\nu(A\times B)\\
			&=\int_{X\times Y}\chi_{A\times B}(x,y)\de\mu\nu(x,y)
		\end{align*}
		che equivale a dire $\chi_{A\times B}\in V$.
		\item[$V$ è un sottospazio vettoriale] Fissate $f,g\in V$, sia $k=af+bg$ una combinazione lineare delle due funzioni. 
		Fissato $x\in X$, se $f(x,{}\cdot{}),g(x,{}\cdot{})$ sono entrambe misurabili, anche $k(x,{}\cdot{})$ lo è poichè le funzioni misurabili sono uno spazio vettoriale come mostrato in \cref{AlgMis}. Inoltre l'insieme degli $x$ per cui una tra $f(x,{}\cdot{})$ e $g(x,{}\cdot{})$ \emph{non} è misurabile è un trascurabile poichè è unione degli insiemi per cui solo una delle due non è misurabile che sono trascurabili visto che $f,g\in V$.
		
		Infine l'identità tra gli integrali per $k$ è ovvia visto che l'operatore integrale è lineare e il porre arbitrariamente a $0$ il valore dove non è definita la funzione $\int_Yk(x,y)\de\nu(y)$ non cambia il valore dell'integrale esterno.
		\item[$V$ è chiuso per convergenza monotona] Considero un insieme di funzioni $f_n$ che converge monotonamente a $f$.
	\end{description}

\end{proof}

