\section{Misura prodotto}
Trattiamo ora la possibilità di rendere uno spazio di misura il prodotto di due spazi di misura. 

Questo risulterà facile sfruttando, come strumento principale, il teorema di estensione di Caratheodory. 
Nella dimostrazione del primo teorema, che fondamentalmente verifica le ipotesi di Caratheodory, proponiamo una via tecnica (che sfrutta la teoria degli integrali costruita), che diverge da quello che potrebbe essere un modo standard di procedere. Questo è sia più breve di una dimostrazione fatta con le mani, sia rende chiara da subito la possibilità di avere scambi tra gli operatori integrali in uno spazio prodotto. 

Infine dimostreremo i teoremi di Fubini e Tonelli, cioè la possibilità di scambiare tra loro gli operatori di integrazione sotto opportune ipotesi.
%TODO Parole in libertà qui sopra.


\newcommand{\B}{\ensuremath{\mathscr B}}
\begin{definition}
	Dati due insiemi $X,Y$ e $x\in X$ fissato, indichiamo con la notazione $J^X_x$ la funzione $J^X_x:\mathcal P(X\times Y) \to \mathcal P(Y)$ così definita:
	\begin{equation*}
		\forall E\subseteq X\times Y:\ J^X_x(E)=\{y\in Y:\ (x,y)\in E\}
	\end{equation*}
	
	Dove ovvio verrà omesso l'apice che indica l'insieme.
\end{definition}

\begin{definition}\label{def:SemianelloProdotto}
	Dati due spazi misurabili $(X,\A)$, $(Y,\B)$ definiamo, con abuso di notazione, $\A\times\B$ come la famiglia degli insiemi $A\times B$ dove $A\in\A$ e $B\in\B$, che chiameremo rettangoli.
\end{definition}

\begin{proposition}\label{prop:SemianelloProdotto}
	Dati due spazi misurabili $(X,\A)$, $(Y,\B)$, la famiglia $\A\times\B\subseteq \mathcal P(X\times Y)$ è un \semiring{}.
\end{proposition}
\begin{proof}
	Ovviamente $\emptyset\in\A\times\B$ visto che $\emptyset\in\A$ e $\emptyset\in\B$.
	
	Per concludere, dati $A\times B, A'\times B'\in\A\times\B$, mostriamo esplicitamente una scrittura dell'intersezione e della differenza che rispetti le proprietà che deve avere un \semiring{}:
	\begin{align*}
		(A\times B)\cap (A'\times B') &= (A\cap A')\times(B\cap B')\virgola \\
		(A\times B)\setminus (A'\times B') &= (A\setminus A')\times B)\sqcup( (A\cap A')\times (B\setminus B') )\punto
	\end{align*}
\end{proof}

\begin{definition}\label{def:PremisuraProdotto}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, denotiamo con $\overline{\mu\nu}$ la funzione $\overline{\mu\nu}:\A\times\B\to\Rpiu$ definita in modo che 
	\begin{equation*}
		\forall A\times B\in\A\times\B:\ \overline{\mu\nu}(A\times B)=\mu(A)\nu(B)\punto
	\end{equation*}
\end{definition}

\begin{theorem}\label{thm:PremisuraProdotto}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, allora $(X\times Y,\A\times\B,\overline{\mu\nu})$ è uno spazio di misura elementare, dove $\A\times\B$ e $\overline{\mu\nu}$ sono definiti nelle \cref{def:SemianelloProdotto,def:PremisuraProdotto}.
\end{theorem}
\begin{proof}
	Avendo già verificato che $\A\times\B$ è un \semiring{} nella \cref{prop:SemianelloProdotto}, è sufficiente mostrare che $\overline{\mu\nu}$ è \sigadd{}.
	
	Sia $(A_n\times B_n)_{n\in\N}\subseteq \A\times \B$ una partizione disgiunta di $A\times B$.
	
	Per ogni $x\in X$, essendo gli $A_n\times B_n$ disgiunti, risulta
	\begin{equation}\label{eq:PremisuraProdottoSerie}
		\bigsqcup_{n\in\N} J_x(A_n\times B_n) = J_x(A\times B)  \implies \sum_{n\in\N}\nu\left(J_x(A_n\times B_n)\right)=\nu\left(J_x(A\times B)\right)\virgola
	\end{equation}
	dove nell'implicazione abbiamo applicato la \sigadd[ità] di $\nu$.
	
	Applicando la sola definizione della misura prodotto e dell'integrale per funzioni semplici, fissato $C\times D\in \A\times\B$, abbiamo
	\begin{equation}\label{StupidaIdentitaIndicatrici}
		\overline{\mu\nu}(C\times D)=\mu(C)\nu(D)=\int_{X}\chi_C(x)\nu(D)\de \mu(x)=\int_X \nu\left(J_x(C\times D)\right)\de\mu(x)\virgola
	\end{equation}
	dove l'ultima uguaglianza segue dalla facile identità $\nu\left(J_x(C\times D)\right)=\chi_C(x)\nu(D)$.
	
	Ora unendo le \cref{eq:PremisuraProdottoSerie,StupidaIdentitaIndicatrici}, sfruttando il \cref{cor:IntegrazionePerSeriePositive}, otteniamo
	\begin{align*}
		\overline{\mu\nu}(A\times B)&=\int_X\nu(J_x(A\times B))\de \mu(x)=\int_X\sum_{n\in\N}\nu\left(J_x(A_n\times B_n)\right)\de\mu(x)\\
		&=\sum_{n\in\N}\int_X\nu\left(J_x(A_n\times B_n)\right)\de\mu(x)=\sum_{n\in\N}\overline{\mu\nu}(A_n\times B_n)\virgola
	\end{align*}
	che è la tesi cercata.
\end{proof}

\begin{proposition}\label{prop:TrascurabiliProdotto}
	Dato lo spazio di premisura $(X\times Y,\A\times\B,\overline{\mu\nu})$, che si è mostrato essere di premisura nel \cref{thm:PremisuraProdotto}, sia $\mu\nu^*:\mathcal P(X\times Y)\to\Rpiu$ la misura esterna associata a $\overline{\mu\nu}$.
	
	Se $E\subseteq X\times Y$ è trascurabile rispetto a $\mu\nu^*$, allora per $\mu$-quasi ogni $x\in X$ l'insieme $J_x^X(E)$ è trascurabile\footnote{Il fatto che un insieme sia trascurabile non implica che sia misurabile come osservato nella \cref{def:TrascurabiliMisura}.} rispetto alla misura $\mu$.
\end{proposition}
\begin{proof}
	Chiamiamo $\mu^*,\nu^*$ le misure esterne associate alle misure $\mu,\nu$, definite come nella \cref{prop:MisuraEsternaDiPremisura} considerando $\mu,\nu$ delle premisure\footnote{Uno spazio di misura è sempre ovviamente anche uno spazio di premisura.}.
	
	Per $\delta>0$, sia $X_\delta$ l'insieme degli $x\in X$ tali che $\nu^*(J_x^X(E))\ge\delta$ e sia $m_\delta=\mu^*(X_\delta)$.
	
	Essendo $E$ trascurabile, se per assurdo $m_\delta>0$, esiste una famiglia di rettangoli $(A_i\times B_i)_{i\in\N}\subseteq \A\times\B$ la cui unione contiene $E$ e tali che
	\begin{equation*}
		\sum_{i\in\N}\mu(A_i)\nu(B_i)=\sum_{i\in\N}\overline{\mu\nu}(A_i\times B_i)< \delta m_\delta \punto
	\end{equation*}
	Poniamo $f:X\to\Rpiu$ la funzione definita come
	\begin{equation*}
		f(x)=\sum_{i\in\N}\chi_{A_i}(x)\nu(B_i)
	\end{equation*}
	e notiamo subito che $f$ è una funzione misurabile positiva, per il MISREF{supDiMisurabili}, essendo una serie numerabile di funzioni indicatrici di misurabili.
	
	Per la sola definizione di misura esterna si ottiene che per ogni $x\in X$
	\begin{equation*}
		f(x)=\sum_{i\in\N}\chi_{A_i}(x)\nu(B_i)\ge\nu^*(J_x^X(E))\virgola
	\end{equation*}
	poichè i $B_i$, tali che i rispettivi $A_i$ contengano $x$, sono un ricoprimento numerabile di $J_x^X(E)$.
	
	Allora, per la monotonia della misura esterna, ne segue banalmente che l'insieme $\{x\in X:f(x)\ge\delta\}$ ha misura\footnote{Qui si può parlare di misura e non di misura esterna poichè $f$ è una funzione misurabile.} maggiore o uguale a $m_\delta$.
	Perciò applicando il \cref{thm:DisuguaglianzaChebyshev}, ne ricaviamo che $\LNorm f\ge \delta m_\delta$.

	Però, applicando il \cref{cor:IntegrazionePerSeriePositive}, otteniamo
	\begin{equation*}
		\delta m_\delta \le\LNorm f=\int_X \sum_{i\in\N}\chi_{A_i}(x)\nu(B_i)\de\mu(x)= \sum_{i\in\N}\int_X \chi_{A_i}(x)\nu(B_i)\de\mu(x)=\sum_{i\in\N}\mu(A_i)\nu(B_i)<\delta m_\delta\virgola
	\end{equation*}
	che mostra l'assurdo e dimostra $m_\delta=0$.
	
	Per concludere basta notare che l'insieme degli $x\in X$ tali che $\nu^*(J_x^X(E))>0$ si ottiene come unione numerabile degli $X_{\frac 1i}$, che sono tutti trascurabili, ed è perciò trascurabile anch'esso per la \cref{nota:UnioneTrascurabili} come voluto.
\end{proof}


\begin{definition}\label{def:SigAlgProdotto}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, chiamiamo $\A\otimes\B\subseteq \mathcal P(X\times Y)$ la \sigalg{} generata da $\A\times\B$. 
\end{definition}

\begin{proposition}\label{prop:SezioniMisurabili}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura ed $E\in\A\otimes\B$, le sue sezioni trasversali sono misurabili, cioè
	\begin{align*}
		\forall x\in X:\ &J^X_x(E)\in\B \virgola \\
		\forall y\in Y:\ &J^Y_y(E)\in\A \punto
	\end{align*}
\end{proposition}
\begin{proof}
	\newcommand{\C}{\ensuremath{\mathscr C}}
	Sia $\C\subset\mathcal P(X\times Y)$, l'insieme dei sottoinsiemi di $X\times Y$ tali che tutte le sezioni trasversali (come definite implicitamente nell'enunciato) sono misurabili.
	Dimostriamo ora che $\A\times\B\subseteq \C$ e che $\C$ è una \sigalg{}.
	
	Dato un rettangolo $A\times B\in\A\times B$, è chiaro che le sue sezioni trasversali o sono $A$ o $B$ o vuote e in ogni caso risultano misurabili, perciò vale $A\times B\in\C$ e visto che il rettangolo è stato scelto arbitrariamente se ne ricava $\A\times\B\subseteq \C$.
	
	Dato $E\in\C$, è chiaro che $E^\mathsf{c}\in\C$, visto che le sezioni del complementare sono il complementare delle sezioni e perciò sono anch'esse misurabili.
	
	Data una successione $(E_i)_{i\in\N}$, le sezioni dell'unione $\bigcup_{i\in\N}E_i$ sono facilmente l'unione delle sezioni e quindi anch'esse misurabili. Perciò, per definizione di $\C$, anche $\bigcup_{i\in\N}E_i\in\C$.
	Allora unendo quanto detto si ricava come cercato che $\C$ è una \sigalg{}.
	
	Per concludere basta ricordare che $\A\otimes\B$ è la più piccola \sigalg{} che contiene $\A\times\B$ e visto che $\C$ è una \sigalg{} che contiene $\A\times\B$, deve essere $\A\otimes\B\subseteq\C$. Allora $E\in\A\otimes\B$ implica $E\in\C$ e per definizione di $\C$ questo comporta la tesi.
\end{proof}

\begin{definition}\label{def:MisuraProdotto}
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, chiamiamo $(X\times Y,\A\otimes\B,\mu\nu)$ lo spazio di misura prodotto, dove $\mu\nu$ è la riduzione alla sola \sigalg{} generata da $\A\times\B$ della misura, associata alla premisura $\overline{\mu\nu}$, assicurataci dal \cref{EstensioneCaratheodory}.
\end{definition}

%TODO Questo che segue non ha senso, perchè noi considereremo la misura solo sugli insiemi sigma finiti e perciò tutte le estensioni coincidono.
È importante notare che la scelta dell'estensione della premisura alla misura prodotto è, in qualche senso, di carattere arbitrario. Infatti, a meno che gli spazi siano \sigfin[i], sono possibili altre estensioni non coincidenti della misura. 
È preferibile però considerare l'estensione proposta dal teorema di Caratheodory poichè è la scelta corretta in vista dei teoremi cardine di questa sezione: Fubini e Tonelli.

D'ora in poi parleremo dello spazio di misura prodotto dando per scontato la notazione associata ai singoli spazi di misura, cioè se parliamo di $(X\times Y,\A\otimes\B,\mu\nu)$ è sottointeso che corrisponde agli spazi di misura $(X,\A,\mu)$ e $(Y,\B,\nu)$.

\begin{proposition}\label{prop:PreTonelli}
	Dato lo spazio di misura prodotto $(X\times Y,\A\otimes\B,\mu\nu)$, per ogni insieme misurabile $E\in\A\otimes\B$ \sigfin[o] vale la seguente espressione per la misura:
	\begin{equation*}
		\mu\nu(E)=\int_X\nu\left(J_x^X(E)\right)\de\mu(x)=\int_Y\mu\left(J_y^Y(E)\right)\de\nu(y)\punto
	\end{equation*}
\end{proposition}
\begin{proof}
	\newcommand{\E}{\ensuremath{\mathscr E}}
	Useremo implicitamente che, per quanto dimostrato nella \cref{prop:SezioniMisurabili}, le sezioni di insiemi misurabili nel prodotto sono misurabili anch'esse.
	Inoltre dimostreremo solo la prima uguaglianza della tesi, la seconda risulterà di conseguenza vera per simmetria.
	
	Sia $\E\subseteq \A\otimes\B$ l'insieme degli insiemi misurabili sul prodotto con \emph{misura finita} che rispettano la tesi (solo la prima uguaglianza).
	
	Dimostriamo che $\E$ contiene i rettangoli ed è chiuso per intersezione numerabile monotona e unione numerabile disgiunta.
	
	Sfruttando solo le definizioni degli operatori in gioco, si ha
	\begin{equation*}
		\forall A\times B\in\A\times\B:\ \mu\nu(A\times B)=\mu(A)\nu(B)=\int_X \chi_A(x)\nu(B)\de\mu(x)=\int_X\nu\left(J_x^X(E)\right)\de\mu(x)
	\end{equation*}
	e questo dimostra che $\A\times\B\subseteq \E$ come voluto.
	
	Fissati $(E_i)_{i\in\N}\subseteq \E$ disgiunti, è banale verificare
	\begin{equation*}
		\bigsqcup_{i\in\N}J_x^X(E_i)=J_x^X\left(\bigsqcup_{i\in\N}E_i\right)\virgola
	\end{equation*}
	da cui segue, ricordando che la tesi vale per gli $E_i$ ed applicando la commutazione tra integrale e serie mostrata nel \cref{cor:IntegrazionePerSeriePositive}, l'uguaglianza
	\begin{align*}
		\mu\nu\left(\bigsqcup_{i\in\N}E_i\right)&=\sum_{i\in\N}\mu\nu(E_i)=\sum_{i\in\N}\int_X \nu\left(J_x^X(E_i)\right)\de\mu(x)\\
		&=\int_X\sum_{i\in\N}\nu\left(J_x^X\left(E_i\right)\right)\de\mu(x)=\int_X\nu\left(J_x^X\left(\bigsqcup_{i\in\N}E_i\right)\right)\punto
	\end{align*}
	Quest'ultima uguaglianza dimostra, nel caso in cui l'unione degli $E_i$ abbia misura finita, che $\bigsqcup_{i\in\N}E_i\in\E$ e perciò, vista la scelta arbitraria degli $E_i$, ne ricaviamo che $\E$ è chiuso per unione disgiunta.
	
	Infine siano $(E_i)_{i\in\N}\subseteq \E$ che si contengono decrescentemente $E_{i+1}\subseteq E_i$.
	
	Allora, ricordando il \cref{cor:LimiteMonotonoDecrescenteMisura} e il \cref{thm:ConvergenzaDominata}, otteniamo
	\begin{align*}
		\mu\nu\left(\bigcap_{i\in\N}E_i\right)&=\lim_{i\in\N}\mu\nu(E_i)=
		\lim_{i\in\N}\int_X\nu\left(J_x^X(E_i)\right)\de\mu(x)\\
		&=\int_X\lim_{i\in\N}\nu\left(J_x^X(E_i)\right)\de\mu(x)=
		\int_X\nu\left(J_x^X\left(\bigcap_{i\in\N}E_i\right)\right)\de\mu(x)\virgola
	\end{align*}
	dove nei vari passaggi abbiamo usato implicitamente che gli $E_i$ si contengono vicendevolmente.
	È facile verificare che quanto scritto equivale a dire $\bigcap_{i\in\N}E_i\in\E$, perciò, sempre per l'arbitrarietà della scelta degli $E_i$, ne segue che $\E$ è chiuso per intersezione monotona.
	
	Per quanto detto, seguendo la notazione del \cref{cor:ChiusuraMonotonaInsiemiFiniti}, abbiamo dimostrato che $\widehat{\widehat{{\A\times\B}^F}^F}\subseteq\E$ e perciò appunto per il \cref{cor:ChiusuraMonotonaInsiemiFiniti} fissato $F\in\A\otimes\B$ di misura finita, visto che $\A\otimes\B$ è un sottoinsieme dei misurabili secondo Caratheodory, esiste $E\in\E$ che contiene $F$ e tale che $\mu\nu(E\setminus F)=0$. 
	Però per la \cref{prop:TrascurabiliProdotto} l'insieme trascurabile $E\setminus F$ appartiene ad $\E$, e quindi vale
	\begin{align*}
		\mu\nu(F)&=\mu\nu(E)-\mu\nu(E\setminus F)=\int_X\nu\left(J_x^X(E)\right)\de\mu(x)-\int_X\nu\left(J_x^X(E\setminus F)\right)\de\mu(x)\\
		&=\int_X\nu\left(J_x^X(E\setminus F)\right)-\nu(\left(J_x^X(E)\right)\de\mu(x)
		=\int_X\nu\left(J_x^X(F)\right)\de\mu(x)\virgola
	\end{align*}
	dove nei passaggi intermedi abbiamo ripetutamente usato che $E$ contiene $F$.
	Ma l'identità equivale a $F\in\E$ e perciò, poichè $F$ è un qualsiasi insieme misurabile sul prodotto con misura finita, è dimostrato che ogni insieme di misura finita appartiene a $\E$.
	
	Per concludere la dimostrazione sia $G\in\A\otimes\B$ un insieme misurabile \sigfin[o]. Per l'ipotesi di \sigfin[ezza], esiste una famiglia $(F_i)_{i\in\N}\subseteq \A\otimes\B$ di insiemi disgiunti di misura finita la cui unione coincide con $G$.
	
	Ricordando la dimostrazione del fatto che $\E$ è chiuso per unione disgiunta, notiamo che abbiamo già dimostrato che l'unione disgiunta di elementi di $\E$ rispetta anch'essa la tesi, indipendentemente dal fatto che sia anch'essa di misura finita o meno. Questo però dimostra che la tesi vale anche per $G$ visto che $F_i\in\E$, essendo misurabili di misura finita, e $G$ si può scrivere come unione numerabile disgiunta degli $F_i$. 
\end{proof}

\begin{theorem}[Tonelli]\label{thm:Tonelli}%TODO Definire il supporto
	Dato $(X\times Y,\A\otimes\B,\mu\nu)$ uno spazio prodotto, per ogni funzione $f:X\times Y\to\Rbar$ misurabile positiva a supporto \sigfin[o] vale
	\begin{equation*}
		\int_{X\times Y}f(u)\de\mu\nu(u)=\int_X\int_Y f(x,y)\de\nu(y)\de\mu(x)=\int_Y\int_X f(x,y)\de\mu(x)\de\nu(y)\punto
	\end{equation*}
\end{theorem}
\begin{proof}
	\newcommand{\E}{\ensuremath{\mathscr E}}
	Sia $\E$ l'insieme delle funzioni misurabili con supporto \sigfin[o] che rispettano la prima uguaglianza della tesi (è ovvio che se dimostriamo la prima uguaglianza, la seconda segue per simmetria).
	
	La \cref{prop:PreTonelli} implica che, per ogni $E\in\A\otimes\B$ a supporto \sigfin[o], vale
	\begin{equation*}
		\int_{X\times Y}\chi_E(u)\de\mu\nu(u)=\mu\nu(E)=\int_X\nu\left(J_x^X(E)\right)\de\mu(x)=\int_X\int_Y\chi_E(x,y)\de\nu(y)\de\mu(x)\virgola
	\end{equation*}
	che equivale a dire che le funzioni indicatrici dei misurabili \sigfin[i] appartengono a $\E$.
	
	Inoltre, per la linearità dell'operatore di integrale, è facile convincersi che $\E$ è un sottospazio vettoriale delle funzioni misurabili e perciò, visto che contiene le indicatrici degli insiemi misurabili \sigfin[i], contiene ogni funzione semplice a supporto \sigfin[o].
	
	Per concludere sia $f:X\times Y\to\Rbar$ una funzione misurabile a supporto \sigfin[o].
	Per il \cref{cor:LimSemCrescMis} esiste una famiglia crescente $(f_i)_{i\in\N}$ di funzioni misurabili positive che convergono puntualmente ad $f$. Essendo $f$ a supporto \sigfin[o] ed essendo le $f_i$ sempre minori di $f$ anche il loro supporto è \sigfin[o] e perciò $f_i\in\E$ per ogni $i\in\N$.
	
	Infine, applicando ripetutamente \cref{thm:BeppoLevi} e ricordando la monotonia dell'integrale, otteniamo
	\begin{align*}
		\int_{X\times Y}f(u)\de\mu\nu(u)
		&=\lim_{i\in\N}\int_{X\times Y}f_i(u)\de\mu\nu(u)
		=\lim_{i\in\N}\int_X\int_Y f_i(x,y)\de\nu(y)\de\mu(x)\\
		&=\int_X\left(\lim_{i\in\N}\int_Y f_i(x,y)\de\nu(y)\right)\de\mu(x)
		=\int_X\int_Y\lim_{i\in\N} f_i(x,y)\de\nu(y)\de\mu(x)\\
		&=\int_X\int_Y f(x,y)\de\nu(y)\de\mu(x)
	\end{align*}
	e questo dimostra $f\in\E$ concludendo la dimostrazione.
\end{proof}

\begin{theorem}[Fubini]\label{thm:Fubini}
	Dato $(X\times Y,\A\otimes\B,\mu\nu)$ uno spazio prodotto, per ogni funzione $f:X\times Y\to\Rbar$ integrabile vale
	\begin{equation*}
		\int_{X\times Y}f(u)\de\mu\nu(u)=\int_X\int_Y f(x,y)\de\nu(y)\de\mu(x)=\int_Y\int_X f(x,y)\de\mu(x)\de\nu(y)\virgola
	\end{equation*}
	dove alcuni integrali risultano definiti solo quasi ovunque, ma questo non influisce in virtù del \cref{cor:IntegraleAMenoDiTrascurabili}.
\end{theorem}
\begin{proof}
	Ancora una volta dimostriamo solo la prima uguaglianza, visto che la seconda segue poi per simmetria.
	
	Decompongo, come nella \cref{def:IntegraleIntegrabili}, la funzione $f$ nelle funzioni positive $f^+,f^-:X\times Y\to\Rbar$.
	Le funzioni $f^+,f^-$ sono integrabili a loro volta MISREF e perciò per il \cref{cor:SupportoIntegrabile} hanno supporto \sigfin[o].
	
	Allora da qui si conclude banalmente sfruttando la linearità dell'operatore di integrale e il \cref{thm:Tonelli}:
	\begin{align*}
		\int_{X\times Y}f(u)\de\mu\nu(u)
		& =\int_{X\times Y}f^+(u)\de\mu\nu(u)-\int_{X\times Y}f^-(u)\de\mu\nu(u)\\
		&=\int_X\int_Y f^+(x,y)\de\nu(y)\de\mu(x)-\int_X\int_Y f^-(x,y)\de\nu(y)\de\mu(x)\\
		&=\int_X\left(\int_Y f^+(x,y)\de\nu(y)-\int_Y f^-(x,y)\de\nu(y)\right)\de\mu(x)\\
		&=\int_X\int_Y f^+(x,y)-f^-(x,y)\de\nu(y)\de\mu(x)
		=\int_X\int_Y f(x,y)\de\nu(y)\de\mu(x)\punto
	\end{align*}
	È importante notare che, come osservato nel MISREF, gli integrali interni $\int_Y f(\bar x,y)\de\nu(y)$ possono non esistere, ma poichè questo avviene per $\mu$-quasi nessuna $\bar x\in X$ ciò non influisce sul valore dell'integrale doppio.
\end{proof}



%TODO MIgliorare da qui in poi.

\begin{proposition}
	Siano $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura ed $E$ un insieme misurabile dello spazio prodotto $(X\times Y,\A\otimes\B,\mu\nu)$.
	Per $\mu$-quasi ogni $x$ l'insieme $J^X_x(E)$ è un misurabile, cioè appartiene a $\B$.
\end{proposition}
\begin{proof}
	TODO: Non sono troppo convinto dell'enunciato, forse serve qualche ipotesi di \sigfin[ezza].
\end{proof}

\begin{proposition}
	Siano $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura ed $f:X\times Y\to\Rbar$ una funzione misurabile dello spazio prodotto $(X\times Y,\A\otimes\B,\mu\nu)$.
	Per $\mu$-quasi ogni $x$ la funzione $f(x,{}\cdot{}):Y\to\Rbar$ è misurabile nello spazio $(Y,\B,\nu)$.
\end{proposition}
\begin{proof}
	TODO: Come sopra!
\end{proof}





\begin{theorem}[Tonelli]
	Dati $(X,\A,\mu)$ e $(Y,\B,\nu)$ spazi di misura, sia $f:X\times Y\to \Rbar$ una funzione positiva misurabile sullo spazio prodotto $(X\times Y,\A\otimes\B,\mu\nu)$ a supporto \sigfin[o].

	Allora la funzione $f(x,{}\cdot{})$ è misurabile per $\mu$-quasi ogni $x\in X$, la funzione $\int_Y f(x,y)\de\nu(y)$ è perciò definita $\mu$-quasi ovunque e, ponendola nulla dove non è definita, risulta misurabile. Stessa cosa vale anche scambiando tra loro i ruoli di $X$ e $Y$.
	
	Infine vale la seguente identità, che acquista significato visto quanto si è appena affermato (la funzione integrale, dove non definita, la pongo arbitrariamente a $0$):
	\begin{equation*}
		\int_X\int_Y f(x,y)\de\nu(y)\de\mu(x)=\int_{X\times Y}f(x,y)\de\mu\nu(x,y)=\int_Y\int_Xf(x,y)\de\mu(x)\de\nu(y)
	\end{equation*}
\end{theorem}
\begin{proof}
	Definiamo $V$ l'insieme delle funzioni positive misurabili sullo spazio prodotto che rispettano le richieste di misurabilità dell'enunciato (solo quelle senza scambiare i ruoli di $X$ e $Y$, cioè quelle necessarie a dare senso alla prima identità) nonchè la prima identità tra gli integrali. Dimostreremo che $V$ comprende tutte le funzioni a supporto \sigfin[o], e questo proverà la tesi visto che per totale simmetria dovrà valere anche la seconda identità tra integrali. 
	
	Verifichiamo che $V$ rispetti tutte le ipotesi del MISREF:	
	\begin{description}
		\item[$V$ contiene le indicatrici dei rettangoli] Questo risulta molto facile sfruttando la definizione della misura prodotto e dell'integrale di funzioni semplici (in particolare le ipotesi di misurabilità, in questo caso, valgono ovunque e non solo $\mu$-quasi ovunque).
		
		Infatti, fissati $A\in\A$ e $B\in\B$, vale:
		\begin{align*}
			\int_X\int_Y \chi_{A\times B}(x,y) \de\nu(y)\de\mu(x) &=\int_X \nu(B)\chi_A(x)\de\mu(x)=\mu(A)\nu(B)=\mu\nu(A\times B)\\
			&=\int_{X\times Y}\chi_{A\times B}(x,y)\de\mu\nu(x,y)
		\end{align*}
		che equivale a dire $\chi_{A\times B}\in V$.
		\item[$V$ è un sottospazio vettoriale] Fissate $f,g\in V$, sia $k=af+bg$ una combinazione lineare delle due funzioni. 
		Fissato $x\in X$, se $f(x,{}\cdot{}),g(x,{}\cdot{})$ sono entrambe misurabili, anche $k(x,{}\cdot{})$ lo è poichè le funzioni misurabili sono uno spazio vettoriale come mostrato in \cref{AlgMis}. Inoltre l'insieme degli $x$ per cui una tra $f(x,{}\cdot{})$ e $g(x,{}\cdot{})$ \emph{non} è misurabile è un trascurabile poichè è unione degli insiemi per cui solo una delle due non è misurabile che sono trascurabili visto che $f,g\in V$.
		
		Infine l'identità tra gli integrali per $k$ è ovvia visto che l'operatore integrale è lineare e il porre arbitrariamente a $0$ il valore dove non è definita la funzione $\int_Yk(x,y)\de\nu(y)$ non cambia il valore dell'integrale esterno.
		\item[$V$ è chiuso per convergenza monotona] Considero un insieme di funzioni $f_n$ che converge monotonamente a $f$.
	\end{description}

\end{proof}

