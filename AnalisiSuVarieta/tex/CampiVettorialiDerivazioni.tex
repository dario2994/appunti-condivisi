\chapter{Campi vettoriali e derivazioni}

\section{Definizioni e richiami} %TODO: aggiungere ``di campi vettoriali e curve integrali``

\begin{definition} \index{campo!vettoriale}
	Sia $M$ una varietà $C^k$. Un \emph{campo vettoriale} su $M$ è una funzione $X:M\to TM$ tale che $X(p)\in T_pM$ per ogni $p\in M$. Un campo vettoriale è detto di classe $C^r$ (con $r< k$) se le sue componenti sono di classe $C^r$.
\end{definition}

Se $(U,\varphi)$ è una carta con $(x^1,\dots,x^n)$ coordinate locali, allora possiamo scrivere
\begin{equation*}
	X(x)=\sum_{i=1}^nX^i(x)\frac{\partial}{\partial x^i}\virgola
\end{equation*}
dove $(X^1,\dots,X^n)(x)=T\varphi(X(\varphi^{-1}(x)))$.

\index{campo!vettoriale!$\chi^r(M)$} \index{campo!vettoriale!$\chi(M)$}
Chiamiamo $\chi^r(M)$ l'insieme dei campi vettoriali $C^r$ su $M$, mentre indichiamo con $\chi(M)$ l'insieme dei campi $C^\infty$ su $M$.
 

\begin{remark} \label{nota:CampiVettEndomorfismiCinfinito}
	Osserviamo che un campo vettoriale $X$ agisce linearmente sugli endomorfismi di $C^\infty(M)$. Infatti, data $f\in C^\infty(M)$, possiamo definire l'applicazione $X(f)\in C^\infty(M)$ tale che $X(f)(p)\coloneqq \de f(X(p))$.
	
	Tale applicazione dai campi vettoriali agli endomorfismi di $C^\infty(M)$ è facilmente iniettiva, ma non è surgettiva, poiché un endomorfismo indotto da un campo vettoriale deve rispettare la regola di Leibnitz; infatti date $f,g \in C^\infty(M)$ vale
	\begin{equation*}
		X(fg) (p) = \de (f g) (X(p)) = g \cdot \de f (X(p)) + f \cdot \de g(X(p)) = g \cdot X(f) + f \cdot X(g) \punto 
	\end{equation*}

\end{remark}

 
\begin{definition} \index{curva integrale}
	Una \emph{curva integrale} di un campo vettoriale $X$ è una curva diffenziabile $c$ tale che $c'(t)=X(c(t))$ per ogni $t$.
\end{definition}

Se $(U,\varphi)$ è una carta allora le coordinate $c^i(t)$ di $c$ soddisfano le equazioni diffenziali $\frac{\de c^i}{\de t}=X^i(c^1(t),\dots,c^n(t))$ per $i=1,\dots,n$. Questo è un sistema autonomo, anche se in generale si possono considerare anche campi vettoriali dipendenti dal tempo.
 
Ora richiamiamo dei risultati sulle equazioni diffenziali ordinarie che daremo per noti.
 
\begin{theorem}[Cauchy-Lipschitz]  \index{teorema!Cauchy-Lipschitz} \label{thm:CauchyLipschitz}
	Siano $U\subseteq\R^n$ aperto e $X:U\to\R^n$ di classe $C^1$. Allora per ogni $x_0\in U$ esiste $I\subseteq\R$ aperto con $0\in I$ e $c:I\to\R^n$ tali che $c(0)=x_0$ e $c'(t)=X(c(t))$. Inoltre se esistono $c_1,c_2:I_1,I_2\to\R^n$ come sopra, allora esse coincidono su $I_1\cap I_2$.
\end{theorem}

\begin{theorem}[Differenziabilità del flusso] \index{teorema!differenziabilità del flusso}
	Se, nelle stesse ipotesi del teorema precedente, $X$ è di classe $C^k$, allora esistono un intorno aperto $U_0\subseteq U$, un numero $a>0$ ed una funzione $F:U_0\times (-a,a)\to\R^n$ di classe $C^k$ tali che per ogni $u\in U_0$ la curva $c_u(t)=F(u,t)$ sia una curva integrale di $X$ tale che $c_u(0)=u$.
\end{theorem}

\section{Flusso locale di un campo vettoriale}

\begin{definition}\label{def:FlussoLocale} \index{flusso!locale}
	Sia $M$ una varietà e $X\in\chi^r(M)$. Allora un \emph{flusso locale} di $X$ in $p\in M$ è una tripla $(U_0,a,F)$ tale che:
	\begin{enumerate}
	\item $p\in U_0\subseteq M$, $U_0$ è aperto e $a>0$; \label{FL:aperto}
	\item $F:U_0\times I_a\to M$ è di classe $C^r$, dove $I_a=(-a,a)$; \label{FL:Cr}
	\item per ogni $u\in U_0$ si ha che $c_u=F(u,\cdot):I_a\to M$ è una curva integrale di $X$ con dato iniziale $u$; \label{FL:curvaintegrale}
	\item se per $t\in I_a$ chiamiamo $F_t(u)=F(u,t)$, allora $F_t(U_0)$ è aperto ed $F_t$ è un diffeomorfismo $C^r$ con l'immagine. \label{FL:diffeo} %TODO: usare F^t invece di F_t per coerenza con il dopo
	\end{enumerate}
\end{definition}

Prima di dimostrare l'esistenza di un flusso locale, mostriamone le proprietà di unicità e di semigruppo.
 
\begin{proposition} \label{prop:UnicitaCurveIntegrali}
	Due curve integrali di un campo vettoriale con la stessa condizione iniziale coincidono sull'intersezione dei loro domini.
\end{proposition}

\begin{proof}
	Osserviamo che non si può applicare direttamente il teorema di Cauchy-Lipschitz perché la curva potrebbe non appartenere ad una sola carta.
	
	Siano $c_1,c_2$ le due curve considerate e sia $K=\{ t\in I\ : \ c_1(t)=c_2(t)\}\subseteq I$, dove $I$ è l'intersezione dei domini delle due curve (ed è dunque un intervallo di $\R$). L'insieme $K$ è chiuso perché $M$ è di Hausdorff, è aperto perché per ogni $t\in K$ si può prendere una carta che lo contiene ed applicare in carta il \cref{thm:CauchyLipschitz}, ed è non vuoto perché per ipotesi $0\in K$. Dunque, dato che $I$ è connesso, $K=I$.
\end{proof}

\begin{proposition}
	Se la tripla $(U_0,a,F)$ soddisfa le ipotesi \ref{FL:aperto}, \ref{FL:Cr} e \ref{FL:curvaintegrale} nella \cref{def:FlussoLocale}, allora $F_{s+t}=F_s\circ F_t=F_t\circ F_s$ per ogni $t,s,t+s\in I_a$.
	
	Inoltre $F_0$ è l'identità e, se $U_t=F_t(U_0)$ e $U_t\cap U_0\ne\emptyset$, si ha che $F_t\restrict{U_{-t}\cap U_0}:U_{-t}\cap U_0\to U_0\cap U_t$ è un diffeomorfismo con inverso $F_{-t}\restrict{U_0\cap U_t}$.
\end{proposition}

\begin{proof}
	Abbiamo che $F_{s+t}(u)=c_u(s+t)$ e $F_t(F_s(u))=F_t(c_u(s))$ sono entrambe curve integrali che passano per $c_u(s)$ per $t=0$, dunque coincidono per la \cref{prop:UnicitaCurveIntegrali}, perciò $F_{s+t}=F_t\circ F_s$. Da ciò si deduce facilmente il resto.
\end{proof}


\begin{proposition}[Esistenza e unicità di flussi locali] \index{teorema!esistenza e unicità di flussi locali} \label{prop:EsistenzaUnicitaFlussiLocali}
	Sia $X$ campo vettoriale di classe $C^r$, allora per ogni $p\in M$ esiste un flusso locale di $X$ in $p$. Inoltre se $(U_0,a,F)$, $(U_0',a',F')$ sono flussi locali devono coincidere su $(U_0\cap U_0')\times (I_a\cap I_{a'})$.
\end{proposition}
\begin{proof}
	\begin{description}
	\item [unicità:]
	Per ogni $u\in U_0\cap U_0'$, se $I=I_a\cap I_{a'}$, allora $F\restrict{\{u\}\times I}=F'\restrict{\{u\}\times I}$ per la \cref{prop:UnicitaCurveIntegrali}, da cui l'unicità.
	
	\item [esistenza:]
	Sia $(U,\varphi)$ carta di $M$; %, $u\in M$. ??
	consideriamo il rappresentate locale $X_\varphi$ di $X$ (cioè $X_\varphi(\varphi(q))=T\varphi(X(q))$), che genera un flusso locale $(U_\varphi,a_\varphi,F_\varphi)$.
	Supponiamo $U_\varphi\subseteq \varphi(U)$ e $F_\varphi(U_\varphi\times I_{a_\varphi})\subseteq \varphi(U)$ e chiamiamo $\tilde U=\varphi^{-1}(U_\varphi)$.
	
	Poniamo  $F:\tilde U\times I_{a_\varphi}\to M$ tale che $F(u,t)=\varphi^{-1}(F_\varphi(\varphi(u),t))$.
	Per continuità esistono $b\in(0,a_\varphi)$ e $V\subseteq \tilde U$ tali che $F(V\times I_b)\subseteq \tilde U$. %$p\in V$??
	Allora $(V,b,F)$ verifica \ref{FL:aperto}, \ref{FL:Cr}, \ref{FL:curvaintegrale} della \cref{def:FlussoLocale}. Per avere \ref{FL:diffeo} notiamo che $F_t$ ha inversa $F_{-t}$ di classe $C^r$.
	\end{description}
\end{proof}

\begin{exercise}
	Sia $M$ varietà $C^k$, $X\in\chi^k(M)$. Sia $p\in M$ tale che $X(p)\not=0$. Dimostrare che esiste $(U,\varphi)$ carta tale che $X\restrict U=\frac{\partial}{\partial x^1}\restrict U$, dove $\varphi=(\seqa xn,)$.
\end{exercise}	

\begin{exercise}
	Sia $F:M\times\R\to M$ regolare tale che $F_{t+s}=F_t\circ F_s$ e $F_0=F(\cdot,0)=\id_M$. Mostrare che esiste un unico campo vettoriale $X$ tale che $F_t$ coincide con il flusso indotto da $X$.
\end{exercise}

\section{Flusso di un campo vettoriale} %TODO: titolo migliore?

\begin{definition} \index{campo!vettoriale!$\mathscr D_X$} \index{campo!vettoriale!completo} \index{flusso}6
	Siano $M$ una varietà e $X$ un campo vettoriale. Sia $\mathscr D_X\subseteq M\times \R$ l'insieme degli $(x,t)$ tali che esiste $c:I\to M$ curva integrale, con $c(0)=x$ e $t \in I$.
	
	Il campo $X$ è detto \emph{completo} se $\mathscr D_X=M\times \R$ e completo per tempi positivi (rispettivamente negativi) se $\mathscr D_X\supseteq M\times\R^+$ (rispettivamente $\R^-$).
	
	Chiamiamo $(T(x)^-,T(x)^+)$ l'intervallo massimale di una curva che passa per $x$ al tempo 0. 
\end{definition}

\begin{example}
\begin{enumerate}
	\item Se $M=\R^2$, allora $X=(1,0)$ è completo, poiché $c_{(x,y)}(t)=(x+t,y)$ è una curva integrale definita su tutto $\R$ e passante per $(x,y)$ al tempo 0.
	\item Se $M=\{(x,y) \in \R^2 \suchthat x>0\}$, allora $X=(1,0)$ è completo per tempi positivi.
	\item Se $M=\R$ e $X(x)=1+x^2$, allora $c(t)=\tan t$ è una curva integrale con $c(0)=0$, da cui $T^\pm(0)=\pm \frac \pi 2$.
\end{enumerate}
\end{example}

\begin{proposition} \label{prop:ProprietaDX}
	Siano $M$ una varietà e $X\in \chi^r(M)$, con $r\ge 1$. Allora:
	\begin{enumerate}
	 \item $M\times\{0\}\subseteq \mathscr D_X$; \label{PDX:ContieneM}
	 \item $\mathscr D_X$ aperto; \label{PDX:Aperto}
	 \item esiste un'unica $F_X:\mathscr D_X\to M$ di classe $C^r$ tale che $t\mapsto F_X(p,t)$ è una curva integrale che passa per $p$ a tempo 0; \label{PDX:FunzioneSuDX}
	 \item per $(p,t),(p,t+s)\in\mathscr D_X$ vale che $F_X(p,t+s)=F_X(F_X(p,t),s)$. \label{PDX:Composizione}
	\end{enumerate}
\end{proposition}

\begin{proof}
	I punti \ref{PDX:ContieneM} e \ref{PDX:Aperto} seguono dalla \cref{prop:EsistenzaUnicitaFlussiLocali}. L'esistenza di $F_X$, cioè il punto \ref{PDX:FunzioneSuDX}, si ottiene incollando curve integrali e il punto \ref{PDX:Composizione} segue dall'unicità globale.
	Infine la regolarità $C^r$ globale di $F_X$, segue da quella locale ricoprendo una data traiettoria con un numero finito di piccoli intorni.
\end{proof}

\begin{definition} \index{campo!vettoriale!flusso generato} \index{curva integrale!massimale}
	Chiamiamo $t\mapsto F_X(p,t)$, con $(p,t)\in\mathscr D_X$, la \emph{curva integrale massimale} passante per $p$ a tempo 0.
	
	Se $X$ è completo, $F_X$ è detto il \emph{flusso generato da $X$}. In questo caso abbiamo una famiglia ad un parametro di diffeomorfismi.
\end{definition}

\begin{proposition}
	Supponiamo che $X$ sia a supporto compatto in $M$. Allora $X$ è completo.
\end{proposition}

\begin{proof}
	Se $p\not \in\supp (X)$, allora $T^{\pm}(p)=\pm\infty$ con $F_X(p,t)=p$.
	
	Se $p\in\supp(X)$, supponiamo per assurdo $T^+(p)<\infty$. Sia $t_n$ una successione che converge crescendo a $T^+(p)$, allora per compattezza esiste $t_{n_k}$ tale che $F_X(p,t_{n_k})$ converge a $\bar p\in M$.
	Però $\mathscr D_X$ è aperto, quindi contiene un intorno di $(\bar p,0)$.
	Di conseguenza esiste $\tau >0$ (indipendente da $k$ sufficientemente grande) tale che il flusso che passa per $c(t_{n_k})$ a tempo 0 è definito almeno per un tempo $\tau$.
	Allora potevamo estendere $c(t)$ fino a $t_{n_k}+\tau$, il che è assurdo per $k$ abbastanza grande.
\end{proof}


\begin{corollary}
	Se $M$ è compatta, allora $X$ è completo.
\end{corollary}


\begin{exercise}
	Sia $X$ campo vettoriale su $\R^n$ di classe $C^r$ e sia $f:\R^n\to \R$ di classe $C^1$ e propria (cioè controimmagine di compatti è compatta). Supponiamo che esistano $K,L>0$ tali che $\abs{X(f)(p)}\le K\abs{f(p)}+L$ per ogni $p\in\R^n$.. 
	Dimostrare che $X$ è completo.
\end{exercise}
