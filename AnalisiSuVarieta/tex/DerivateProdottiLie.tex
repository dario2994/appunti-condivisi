\chapter{Derivate e prodotti di Lie}

\section{Derivata e parentesi di Lie}
La derivata di Lie è uno strumento che ci permette di calcolare variazioni di varie quantità (per esempio funzioni) quando ci muoviamo sulla varietà.

Siano $f$ una funzione regolare su $\R^n$ e $p,v\in\R^n$. Allora $\Diff_vf(p)=\lim_{h\to 0} \frac{f(p+hv)-f(p)}h$ è la derivata direzionale in $p$ lungo $v$. Questa si può ritrovare considerando $\gamma(t)=p+tv$ e calcolando $\frac \de{\de t} f(\gamma(t))\restrict{t=0}$.

Ora vogliamo studiare il caso generale su varietà.
Siano $p\in M$ ed $f$ una funzione regolare definita in un intorno di $p$ e sia $v \in T_{p}M$. Osserviamo innanzitutto che per definizione esiste $c$ curva $C^1$ tale che $[c]_p=v$.

\begin{definition} \index{derivata!direzionale}
	Definiamo la \emph{derivata direzionale} di $f$ in $p$ lungo $v$ come $v(f)(p)\coloneqq\frac \de {\de t} f(c(t))\restrict{t=0}$.
\end{definition}

Se $(U,\varphi)$ è una carta e $(\varphi\circ c)(t)=(c^1(t),\ldots,c^n(t))$, allora:
\begin{equation*}
	\frac \de{\de t} (f\circ c)(t)\restrict{t=0}=\Diff_{[(c^1)'(0),\ldots,(c^n)'(0)]}(f\circ\varphi^{-1})(\varphi(p)) \virgola
\end{equation*}
quindi la derivata direzionale non dipende dalla scelta di $c\in[c]_p$.

Una curva integrale di un campo vettoriale $X$ ha velocità $X(p)$ in $p$. Scegliamo allora come $c(t)$ una curva integrale di $X$, così la formula precedente diventa:
\begin{equation*}
	(X(p))(f)(p)=\lim_{h\to 0} \frac 1h \left[ f(F_X(p,h))-f(p) \right]
\end{equation*}
e questa si chiama derivata di Lie di $f$ rispetto ad $X$.

Questo approccio consente di estendere la definizione ai campi vettoriali, e non solo...

Sia $\Fl{X}{h}(p)=F_X(p,h)$ la sezione del flusso locale in $p$ generato da $X$. Allora $F=\Fl{X}{h}$ è di classe $C^r$ ed esiste la mappa tangente $F_*(v)=TF(v)\in T_{F(q)}M$, per $q\in M$, $v\in T_qM$.

Sia $p\in M$ e $Y$ campo vettoriale definito in un intorno di $p$. Per $h\in\R^+$ abbastanza piccolo, abbiamo due vettori tangenti in $p$: $Y(p)$ e $(T\Fl{X}{h})(Y(\Fl{X}{-h}(p)))$.

\begin{definition} \index{derivata!di Lie}
	Definiamo la \emph{derivata di Lie} in $p$ di $Y$ rispetto a $X$ come \begin{equation*}\Lie_XY(p)=\lim_{h\to 0}\frac{Y(p)-(\Fl{X}{h})_*Y(p)}h \punto
	\end{equation*}
\end{definition}

\begin{proposition} \label{prop:DerLieProprieta}
	\begin{enumerate}
		\item La derivata di Lie è lineare, cioè $\Lie_XY$ è lineare in $Y$ per ogni $X,Y\in\chi(M)$. \label{DLP:Lineare}
		\item Vale la seguente regola per la derivata di Lie di un prodotto: $\Lie_X(fY)=(Xf)Y+f\Lie_XY$ per ogni $X,Y\in\chi(M)$, $f\in C^\infty(M)$. \label{DLP:Prodotto}
	\end{enumerate}
\end{proposition}

\begin{proof}
	\begin{description}
	 \item [\ref{DLP:Lineare}] Ovvia.
	 \item [\ref{DLP:Prodotto}] Vale la seguente catena di uguaglianze
	 \begin{equation*} %TODO: questa equazione è un po' bruttina
	 \begin{split}
	 \Lie_X(fY)(p)= & \lim_{h\to 0} \frac 1h \left[f(p)Y(p)-(\Fl{X}{h})_*(fY)(\Fl{X}{-h}(p))\right]=\\
	 = & \lim_{h\to 0}\frac 1h \left[f(p)Y(p)-f(\Fl{X}{-h}(p)) ((\Fl{X}{h})_*Y)(\Fl{X}{-h}(p))\right]=\\
	 = & \lim_{h\to 0}\frac 1h \{f(p)[Y(p)-((\Fl{X}{h})_*Y)(\Fl{X}{-h}(p))]\\ &+[f(p)-f(\Fl{X}{-h}(p))]((\Fl{X}{h})_*Y)(\Fl{X}{-h}(p))\}=\\
	 = & f(p)\cdot\Lie_XY(p)+X(f)(p)\cdot Y(p) \punto
	 \end{split}
	 \end{equation*}
	 \end{description}
\end{proof}

%TODO: sistemare bene questa scrittura in coordinate
Vediamo ora la scrittura della derivata di Lie in coordinate. Siano $p\in M$ e $(U,\varphi)$ una carta con $p\in U$ e sia $(x^1,\ldots,x^n)$ il sistema di coordinate corrispondente.
Data $F=(F^1,\ldots,F^n):\tilde U \Subset U \to U$\footnote{Indichiamo $A\Subset B$, se $A\subset K \subset B$ con $K$ compatto.}, abbiamo che \begin{equation*}
	F_*\frac\partial{\partial x^j}(x)=\sum_{l=1}^n \frac{\partial F^l}{\partial x^j}\frac\partial{\partial x^l}(F(x))\punto
\end{equation*}

Ci interessa $F=\Fl{X}{h}$ con $h$ piccolo. Abbiamo che $F(x)=x+hX(x)+\smallO(h)$, dove $\frac{\smallO(h)}{h}\to 0$ in $C^1_{\text{loc}}$.
Allora
\begin{equation*}F_*\frac\partial{\partial x^j}(x)=h\sum_{l=1}^n \frac{\partial X^l}{\partial x^j}\frac\partial{\partial x^l}(x+hX(x)+\smallO(h))+\smallO(h)\virgola\end{equation*}
da cui
\begin{equation*}
	\Lie_X\frac\partial{\partial x^j}=-\sum_{l=1}^n \frac{\partial X^l}{\partial x^j}\frac\partial{\partial x^l}\punto
\end{equation*}

Se nelle coordinate $(x^i)$ indotte da $\varphi$ abbiamo $X=\sum_{i=1}^n X^i\frac\partial{\partial x^i}$ e $Y=\sum_{j=1}^n Y^j\frac\partial{\partial x^j}$, allora
\begin{equation*}
	\Lie_XY=\sum_{j=1}^n\sum_{i=1}^n \left(X^i\frac{\partial Y^j}{\partial x^i}-Y^i\frac{\partial X^j}{\partial x^i}\right)\frac\partial{\partial x^j} \punto
\end{equation*}
Questo campo vettoriale risulta essere il commutatore di $X,Y$.

\begin{definition} \index{commutatore} \index{parentesi di Lie}
Dati $X,Y\in\chi^r(M)$, definiamo $\comm{X}{Y}\in\chi^{r-1}(M)$ il campo vettoriale tale che $\comm{X}{Y}=XY-YX$, che si chiama \emph{commutatore} o \emph{parentesi di Lie}.
Intendiamo che, per ogni $f:M\to\R$ regolare, vale $\comm{X}{Y}(f)=X(Y(f))-Y(X(f))$.
\end{definition}

Dobbiamo però verificare che $\comm XY$, appena definito come un endomorfismo di $C^\infty(M)$ (vedi la \cref{nota:CampiVettEndomorfismiCinfinito}), sia effettivamente un campo vettoriale su $M$.  Per farlo mostriamo che $\Lie_XY$ agisce esattamente come $\comm XY$ su $C^\infty(M)$, da cui otterremo che $\comm XY$ è effettivamente un campo vettoriale che coincide con $\Lie_XY$.

In una carta $(U,\varphi)$, se $X(f)=\sum_{i=1}^n X^i(x)\frac{\partial f}{\partial x^i}$, allora
\begin{multline*}
	Y(X(f))=\sum_{j=1}^nY^j(x)\frac\partial{\partial x^j}\left( \sum_{i=1}^n X^i(x)\frac{\partial f}{\partial x^i} \right)=\\
	= \sum_{j=1}^n \sum_{i=1}^n \left( Y^j(x) \left(\frac{\partial}{\partial x^j}X^i\right)\frac{\partial f}{\partial x^i} +Y^j(x)X^i(x)\frac{\partial^2 f}{\partial x^i\partial x^j} \right)
\end{multline*}
\begin{multline*}
	\implies \comm{X}{Y}(f) = (XY-YX)(f)=\\
	\sum_{i,j=1}^n\left( \left(X^i\frac{\partial Y^j}{\partial x^i}-Y^i\frac{\partial X^j}{\partial x^i}\right)\frac{\partial f}{\partial x^j} +(X^iY^j-X^jY^i)\frac{\partial^2 f}{\partial x^i\partial x^j}  \right)=\Lie_XY(f) \punto
\end{multline*}

\begin{remark}
	C'è un modo intrinseco per vedere che $\Lie_XY=\comm{X}{Y}$:
	\begin{enumerate}
	 \item $f\in C^\infty$ e $X\in\chi(M)$, allora $\frac \de{\de t} ((\Fl{X}{t})_*f)=(\Fl{X}{t})_*\Lie_Xf$;
	 \item $\frac\de{\de t} (\Fl{X}{t})_*Y=(\Fl{X}{t})_*(\Lie_XY)$.
	\end{enumerate}
\end{remark}

\section{Proprietà delle parentesi di Lie}

\begin{proposition}\label{prop:ProprietaParentesiLie}
	La parentesi di Lie soddisfa le seguenti proprietà:
	\begin{enumerate}
	 \item è bilineare; \label{PPL:bilineare}
	 \item è antisimmetrica, cioè $\comm{X}{Y}=-\comm{Y}{X}$ per ogni $X,Y\in\chi(M)$; \label{PPL:antisimmetrica}
	 \item \emph{(identità di Jacobi)} per ogni $X,Y,Z$ vale: \index{identità di Jacobi}
	 \begin{equation*}\comm{X}{\comm{Y}{Z}}+\comm{Y}{\comm{Z}{X}}+\comm{Z}{\comm{X}{Y}}=0\punto\end{equation*} \label{PPL:SommaCiclica}
	\end{enumerate}
\end{proposition}

\begin{proof}
	Le proprietà \ref{PPL:bilineare} e \ref{PPL:antisimmetrica} sono ovvie; vediamo allora la \ref{PPL:SommaCiclica}. Data $f\in C^\infty(M)$, abbiamo che
	\begin{align*}
		\comm{X}{\comm{Y}{Z}}f&=X\comm{Y}{Z}f-\comm{Y}{Z}Xf=X(YZ-ZY)f-(YZ-ZY)Xf=\\
		&= XYZf-XZYf-YZXf+ZYXf\punto
	\end{align*}
	Risulta ora ovvio che sommando gli altri due termini si ha completa cancellazione.
\end{proof}

\begin{remark}
	L'identità di Jacobi si interpreta anche nel modo seguente
	\begin{equation*}
		\Lie_X\comm{Y}{Z}=\comm{\Lie_XY}{Z}+\comm{Y}{\Lie_XZ}\punto
	\end{equation*}
\end{remark}


\begin{lemma}\label{lemma:DerivataLieNaturalePushForwardFunzioni}
	Sia $\varphi:M\to N$ un diffeomorfismo e sia $X\in\chi(M)$, allora per $f\in C^\infty(M)$ vale che
	\begin{equation*}
		\Lie_{\varphi_*X}(f\circ \varphi^{-1})=\varphi_*(\Lie_Xf)\punto
	\end{equation*}
	%[Data $g\in C^\infty(M)$, per definizione $(\varphi_*g)(q)=g(\varphi^{-1}(q)).$]
\end{lemma}

\begin{proof}
	Dato $n\in N$, vale
	\begin{align*} %TODO: ok, ma magari evitare la notazione \Diff
		\Lie_{\varphi_*X}(f\circ \varphi^{-1})(n)&=\Diff_{(\varphi_*X)(n)}(f\circ \varphi^{-1})=\Diff_{(T\varphi \circ X \circ\varphi^{-1})(n)}(f\circ \varphi^{-1})=\\
		&=\Diff_{(X\circ \varphi^{-1})(n)} f(\varphi^{-1}(n))=\varphi_*(\Lie_Xf)(n)\punto
	\end{align*}
\end{proof}


\begin{proposition}\label{prop:DerivataLieNaturalePushForwardCampiVett}
	Sia $\varphi:M\to N$ un diffeomorfismo e siano $X,Y\in\chi(M)$, allora $\Lie_X$ è naturale rispetto al push-forward, cioè
	\begin{equation*}
		\Lie_{\varphi_*X}(\varphi_*Y)=\varphi_*(\Lie_XY)\virgola
	\end{equation*}
	equivalentemente
	\begin{equation*}
		\comm{\varphi_*X}{\varphi_*Y}=\varphi_*\comm{X}{Y}\punto
	\end{equation*}
\end{proposition}

\begin{proof}
	Sia $n\in N$ e sia $g\in C^\infty(V)$ con $V$ aperto di $N$ tale che $n\in V$. Sia inoltre $Z\in\chi(M)$, allora per il \cref{lemma:DerivataLieNaturalePushForwardFunzioni}, posto $m=\varphi^{-1}(n)$, vale che
	\begin{equation*}
		(\varphi_*Z)(g)(n)=Z(g\circ \varphi)(m)\virgola
	\end{equation*}
	dove con la notazione del lemma abbiamo utilizzato $Z=X$ e $g=f\circ \varphi^{-1}$.
	
	Quindi, ponendo $Z=\comm{X}{Y}$, abbiamo
	\begin{align*}
	(\varphi_*\comm{X}{Y})(g)(n)&=\comm{X}{Y}(g\circ \varphi)(m)=X(Y(g\circ \varphi))(m)-Y(X(g\circ \varphi))(m)=\\
	&=X((\varphi_*Y)(g)\circ \varphi)(m)-Y((\varphi_*X)(g)\circ \varphi)(m) =\\
	&= (\varphi_*X)((\varphi_*Y)(g))(n)-(\varphi_*Y)((\varphi_*X)(g))(n) = \comm{\varphi_* X}{\varphi_* Y}[g](n)\virgola
	\end{align*}
	da cui abbiamo concluso perché se due campi coincidono applicati a tutte le funzioni $C^\infty$, allora coincidono come campi vettoriali.
\end{proof}

\section{Commutazione di campi vettoriali}

\begin{lemma} \label{lemma:FlussiEMappe}
	Sia $\varphi:M\to N$ una mappa di classe $C^r$ fra varietà e siano $X\in\chi^r(M)$, $Y\in\chi^r(N)$. Allora $(T\varphi)X=Y\circ \varphi$ se e solo se $\varphi\circ \Fl{X}{t}=\Fl{Y}{t}\circ\varphi$.
	
	In particolare, se $\varphi$ è un diffeomorfismo (e se $(T\varphi)X=Y\circ \varphi$), abbiamo che \\
	$\Fl{Y}{t}=\varphi\circ \Fl{X}{t}\circ \varphi^{-1}$.
	Inoltre $(\Fl{X}{t})_*X=X$ (dove i flussi sono definiti).
\end{lemma}

\begin{proof}
	Supponiamo che $\varphi\circ \Fl{X}{t}=\Fl{Y}{t}\circ \varphi$. Sia $p\in M$, allora
	\begin{equation*}
		\varphi\circ \Fl{X}{t}(p)=\Fl{Y}{t}(\varphi(p))\punto
	\end{equation*}
	Derivando in $t$ otteniamo perciò
	\begin{align*}
		&T\varphi\left(\frac\de{\de t}\Fl{X}{t}(p)\right)=\left(\frac\de{\de t}\Fl{Y}{t}\right)(\varphi(p))\\
		&\implies (T\varphi\circ X\circ \Fl{X}{t})(p) = Y \circ \Fl{Y}{t} \circ \varphi(p) = Y\circ \varphi \circ \Fl{X}{t}(p) \\
		&\implies (T\varphi) X=Y\circ \varphi\punto
	\end{align*}
	
	Ora viceversa supponiamo che $(T\varphi)X=Y\circ\varphi$. Sia $c(t)=F_X(p,t)$ (curva integrale di $X$ che passa per $p$ al tempo 0), allora
	\begin{equation*}
		\frac \de{\de t}(\varphi\circ c)(t) = T\varphi \left(\frac{\de c}{\de t}\right) = T\varphi(X(c(t))) = Y((\varphi\circ c)(t))\punto
	\end{equation*}
	Perciò $\varphi\circ c$ è una curva integrale per $Y$ che passa per $\varphi(p)$ al tempo 0. Di conseguenza, per unicità, abbiamo
	\begin{equation*}
		\varphi \circ \Fl Xt (p) = (\varphi \circ c)(t) = F_Y(\varphi(p),t) = \Fl Yt \circ \varphi (p) \punto
	\end{equation*}
	
	Per dimostrare che $(\Fl{X}{t})_*X=X$, scegliamo come $\varphi$ il diffeomorfismo dato da $\Fl{X}{s}$ con $s$ fissato. Per la prima parta della proposizione $(\Fl{X}{t})_*X=X$ se e solo se $\Fl{X}{s}\circ \Fl{X}{t}=\Fl{X}{t}\circ \Fl{X}{s}$, ma questo è vero per la commutatività.
\end{proof}

\begin{proposition} \label{prop:EquivalenzaParentesiZero}
	Siano $X,Y\in\chi^r(M)$ e siano $\Fl{X}{t},\Fl{Y}{t}$ flussi (definiti localmente o globalmente) indotti da $X$ e $Y$. Allora sono equivalenti:
	\begin{enumerate}
	\item $\comm{X}{Y}=0$; \label{EPZ:ParentesiZero}
	\item $(\Fl{X}{t})_*Y=Y$; \label{EPZ:FlussoY}
	\item $(\Fl{Y}{t})_*X=X$; \label{EPZ:FlussoX}
	\item $\Fl{X}{t}\circ \Fl{Y}{s}=\Fl{Y}{s}\circ \Fl{X}{t}$. \label{EPZ:Commutazione}
	\end{enumerate}
\end{proposition}

\begin{proof}
	Per il \cref{lemma:FlussiEMappe} la commutazione $\Fl{X}{t}\circ \Fl{Y}{s}=\Fl{Y}{s}\circ \Fl{X}{t}$ equivale a $Y=(\Fl{X}{t})_*Y$. Quindi abbiamo mostrato che \ref{EPZ:Commutazione} è equivalente a \ref{EPZ:FlussoY} e allo stesso modo che è equivalente anche a \ref{EPZ:FlussoX}.
	
	Se ora supponiamo $(\Fl{X}{t})_*Y=Y$, allora $\comm{X}{Y}=\frac{\de}{\de t}(\Fl{X}{t})_*Y\restrict{t=0}=0$. Viceversa, se $\comm{X}{Y}=0$ allora $\Lie_XY=0$, da cui
	\begin{equation*}
		\frac{\de}{\de t}(\Fl{X}{t})_*Y=\frac{\de}{\de s}(\Fl{X}{t+s})_*Y\restrict{s=0}=(\Fl{X}{t})_*\comm{X}{Y}=0\punto
	\end{equation*}
	Perciò  $(\Fl{X}{t})_*Y$ è costante in $t$ ed è uguale a Y, perché $(\Fl{X}{0})_*Y=Y$.
\end{proof}

Abbiamo visto che se $X(p)\ne 0$, allora esiste $(U,\varphi)$ carta locale tale che $X=\frac{\partial}{\partial x^1}$ in un intorno di $p$. Consideriamo $Y$ tale che $Y(p)\neq 0$ e $Y(p)$ è linearmente indipendente da $X(p)$. Ci chiediamo se esiste $(U,\varphi)$ tale che $X=\frac{\partial}{\partial x^1}$ e $Y=\frac{\partial}{\partial x^2}$ in $U$. Se consideriamo il commutatore $\comm{\frac{\partial}{\partial x^1}}{\frac{\partial}{\partial x^2}}$, questo è identicamente nullo per il teorema di Schwarz, infatti data $f\in C^\infty(U)$, abbiamo che
\begin{equation*}
	\comm{\frac{\partial}{\partial x^1}}{\frac{\partial}{\partial x^2}}f=\frac{\partial^2f}{\partial x^1\partial x^2}-\frac{\partial^2f}{\partial x^2\partial x^1}=0\punto
\end{equation*}

\begin{proposition} \label{prop:ParentesiZeroImplicaCoordinateLocali}
	Siano $X_1,\dots ,X_k\in \chi(M)$ linearmente indipendenti in un intorno $U$ di $p\in M$. Se $\comm{X_\alpha}{X_\beta}=0$ per ogni $\alpha,\beta=1,\ldots ,k$, allora in $\tilde{U}\Subset U$, con $p\in \tilde{U}$, esistono coordinate $(\tilde{U},x)$ tali che $X_\alpha=\frac{\partial}{\partial x^{\alpha}}$.
\end{proposition}

\begin{proof} %TODO: scrivere meglio perché così fa schifo, ma è giusto e si capisce
	Possiamo supporre $M=\mathbb{R}^n$ con coordinate $(y^1,\dots, y^n)$, $p=0$ e $X_\alpha(0)=\frac{\partial}{\partial y^\alpha}(0)$ per $\alpha=1,\dots, k$. Sia $\Fl{X_\alpha}{t}$ il flusso generato da $X_\alpha$ e sia 
	\begin{equation*}
		\Psi(a^1,\dots, a^n)\coloneqq\Fl{X_1}{a_1}(\Fl{X_2}{a_2}(\dots (\Fl{X_k}{a_k}(0,\dots,0,a^{k+1},\dots, a^n))))\punto 
	\end{equation*}
	Vale allora che
	\begin{equation*}
		\Psi_*\left(\frac{\partial}{\partial a^\alpha}\restrict{0}\right) = 
		\begin{cases}
			\frac{\partial}{\partial y^\alpha}\restrict{0}, &\text{per $\alpha=k+1,\dots,n$}\\
			\frac{\de}{\de t}\left(\Fl{X_\alpha}{t}(0)\right)\restrict{t=0} = X_\alpha(0)=\frac{\partial}{\partial y^{\alpha}}(0), &\text{per $\alpha=1,\dots,k$}
		\end{cases}
	\end{equation*}
	
	Poiché $\comm{X_i}{X_j}=0$ per ogni $i,j=1,\dots,k$, per $\alpha=1,\dots, k$ possiamo scrivere
	\begin{equation*}
		\Psi(a^1,\dots,a^n)=\Fl{X_\alpha}{a_\alpha}(\Fl{X_1}{a_1}(\dots (0\dots 0, a^{k+1},\dots a^n)))\virgola
	\end{equation*}
	da cui $X_{\alpha}=\frac{\partial}{\partial a^{\alpha}}$ in un intorno dell'origine.
\end{proof}

Il commutatore dà una misura della non commutazione di due campi vettoriali. In particolare seguiamo in ordine $X$, $Y$, $-X$ e $-Y$ ciascuno per tempo $h$, allora il commutatore ci darà una stima di quanto il punto in cui arriviamo è lontano dal punto di partenza.

\begin{proposition} \label{prop:DerivataComposizioneFlussi}
	Dato $p\in M$, sia $c(h)=\Fl{Y}{-h}\Fl{X}{-h}\Fl{Y}{h}\Fl{X}{h}(p)$. Allora $c'(0)=0$.
\end{proposition}

\begin{proof}
	Definiamo $\alpha_1(t,h)=\Fl{Y}{t}\Fl{X}{h}(p)$, $\alpha_2(t,h)=\Fl{X}{-t}\Fl{Y}{h}\Fl{X}{h}$ e $\alpha_3(t,h)=\Fl{Y}{-t}\Fl{X}{-h}\Fl{Y}{h}\Fl{X}{h}$. Notiamo innanzitutto che $c(t)=\alpha_3(t,t)$, $\alpha_3(0,t)=\alpha_2(t,t)$ e $\alpha_2(0,t)=\alpha_1(t,t)$.
	Inoltre data $f:M\to\R$ regolare, vale che
	\begin{alignat*}{2}
		&\DerParz{f\circ\alpha_1}{t}=(Yf)\circ\alpha_1 \virgola \quad&&
		\DerParz{f\circ \alpha_2}{t} = -(Xf)\circ \alpha_2 \virgola\\
		&\DerParz{f\circ\alpha_3}{t}=-(Yf)\circ\alpha_3 \virgola \quad&&
		\DerParz{f\circ\alpha_1}{h}(0,h)=(Xf)(\alpha_1(0,h)) \punto
	\end{alignat*}
	%$\DerParz{f\circ\alpha_1}{t}=(Yf)\circ\alpha_1$, $\DerParz{f\circ \alpha_2}{t} = -(Xf)\circ \alpha_2$, $\DerParz{f\circ\alpha_3}{t}=-(Yf)\circ\alpha_3$ e $\DerParz{f\circ\alpha_1}{h}(0,h)=(Xf)(\alpha_1(0,h))$.
	Utilizzando quanto detto abbiamo
	\begin{align*}
	(f\circ c)'(0)&=\frac{\de}{\de t}[f\circ\alpha_3(t,t)]\restrict{t=0} =\Diff_1(f\circ \alpha_3)(0,0)+\Diff_2(f\circ\alpha_3)(0,0) =
	\\ &=\Diff_1(f\circ\alpha_3)(0,0)+\left[\Diff_1(f\circ\alpha_2)(0,0)+\Diff_2(f\circ\alpha_2)(0,0) \right] =
	\\ &=\Diff_1(f\circ\alpha_3)(0,0)+\Diff_1(f\circ\alpha_2)(0,0)+\Diff_1(f\circ\alpha_1)(0,0)+\Diff_2(f\circ\alpha_1)(0,0) =
	\\ &=-(Yf)\circ\alpha_3(0,0)-(Xf)\circ\alpha_2(0,0)+(Yf)\circ\alpha_1(0,0)+(Xf)\circ\alpha_1(0,0) =
	\\ &=0 \virgola
	\end{align*}
	che per l'arbitrarietà di $f$ ci dà la tesi $c'(0)=0$.
\end{proof}

\begin{proposition} \label{prop:DefinizioneDerSeconda}
	Data $c:\oo{-\varepsilon}{\varepsilon}\to M$ tale che $c(0)=p$ e $c'(0)=0$, possiamo definire un vettore $c''(0)\in T_pM$ come $(c''(0))(f)\coloneqq(f\circ c)''(0)$.
\end{proposition}

\begin{exercise}
	Usando la condizione $c'(0)=0$, verificare che $c''(0)$  così definito è una derivazione.
\end{exercise}

\begin{theorem}
	Se $c(t)$ è come nella \cref{prop:DerivataComposizioneFlussi}, allora $c''(0)=2\comm{X}{Y}(p)$.
\end{theorem}

\begin{proof}
	Ricordiamo che, data $f:M\to\R$ regolare, vale $(f\circ c)(t)=(f\circ\alpha_3)(t,t)$. Dunque 
	\begin{equation*}
		(f\circ c)''(0)=\Diff_{1,1}(f\circ\alpha_3)(0,0)+2\Diff_{2,1}(f\circ\alpha_3)(0,0)+\Diff_{2,2}(f\circ\alpha_3)(0,0)\punto
	\end{equation*}
	D'altra parte, abbiamo che
	\begin{itemize}
	 \item il primo termine equivale a
	\begin{equation*}
		\Diff_{1,1}(f\circ\alpha_3)(0,0)=\Diff_1(-Yf\circ\alpha_3)(0,0)=YYf(p)\puntovirgola
	\end{equation*}
	\item il secondo termine invece
	\begin{align*}
		\Diff_{2,1}(f\circ\alpha_3)(0,0) &= \Diff_2(-Yf\circ\alpha_3)(0,0) = \left[\Diff_1(Yf\circ\alpha_2)+\Diff_2(Yf\circ\alpha_2)\right](0,0)=
		\\ &= XYf(p)-\Diff_2(Yf\circ\alpha_2)(0,0)=
		\\ &= XYf(p)-[\Diff_1(Yf\circ\alpha_1)(0,0)+D_2(Yf\circ\alpha_1)(0,0)]=
		\\ &= XY(p)-YYf(p)-XYf(p) \puntovirgola
	\end{align*}
	\item analogamente si dimostra che per il terzo termine vale
	\begin{equation*}
		\Diff_{2,2}(f\circ\alpha_3)(0,0)=YYf(p)+2XYf(p)-2YXf(p) \punto
	\end{equation*}
	\end{itemize}
	E sommando i tre contributi otteniamo proprio quanto voluto.
\end{proof}

\begin{exercise}
	Sia $M$ compatta e $X,Y\in\chi^r(M)$, con $r\ge 2$. Siano $\Fl Xt,\Fl Yt$ i flussi generati da $X$ e $Y$ (definiti globalmente). Dimostrare che se $\comm{X}{Y}=0$ allora $\Fl{X+Y}t=\Fl Xt\circ \Fl Yt$.
\end{exercise}

\begin{exercise}
	Sia $f:M\to \R$ regolare e sia $p\in M$ tale che $\Lie_Xf(p)=0$ per ogni $X\in\chi(M)$ (cioè $p$ è un punto critico di $f$). Dati $X_p,Y_p\in T_pM$, siano $\tilde{X},\tilde{Y}\in\chi(M)$ tali che $\tilde{X}(p)=X_p$ e $\tilde{Y}(p)=Y_p$ (è facile costruirne). Definiamo $H_f(X_p,Y_p)\coloneqq\tilde{X}(\tilde{Y}(f))(p)$.
	
	Mostrare che $H_f$ è ben definita (ovvero non dipende dalla scelta delle estensioni $\tilde{X},\tilde{Y}$) ed è simmetrica, cioè $H_f(X_p,Y_p)=H_f(Y_p,X_p)$.
\end{exercise}
